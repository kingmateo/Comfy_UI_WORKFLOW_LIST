{"last_node_id":296,"last_link_id":306,"nodes":[{"id":24,"type":"Reroute","pos":[1754.977442276745,-91.08295667319645],"size":[75,26],"flags":{},"order":72,"mode":2,"inputs":[{"name":"","type":"*","link":168}],"outputs":[{"name":"","type":"IMAGE","links":[26,33],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":141,"type":"GetNode","pos":[6466.762560068826,-1695.116833850782],"size":{"0":210,"1":58},"flags":{},"order":0,"mode":2,"outputs":[{"name":"VAE","type":"VAE","links":[164],"slot_index":0}],"title":"Get_VAE","properties":{},"widgets_values":["VAE"],"color":"#322","bgcolor":"#533"},{"id":142,"type":"GetNode","pos":[6514.464853972788,-337.6948368329349],"size":{"0":210,"1":58},"flags":{},"order":1,"mode":2,"outputs":[{"name":"VAE","type":"VAE","links":[165],"slot_index":0}],"title":"Get_VAE","properties":{},"widgets_values":["VAE"],"color":"#322","bgcolor":"#533"},{"id":28,"type":"Reroute","pos":[2484.977442276746,-91.08295667319645],"size":[75,26],"flags":{},"order":90,"mode":2,"inputs":[{"name":"","type":"*","link":33}],"outputs":[{"name":"","type":"IMAGE","links":[34],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":52,"type":"CLIPSetLastLayer","pos":[2116.052253507059,982.7889190447833],"size":{"0":210,"1":58},"flags":{},"order":126,"mode":2,"inputs":[{"name":"clip","type":"CLIP","link":61}],"outputs":[{"name":"CLIP","type":"CLIP","links":[149],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPSetLastLayer"},"widgets_values":[-1]},{"id":78,"type":"ADE_ApplyAnimateDiffModelSimple","pos":[3198.052253507059,589.7889190447835],"size":{"0":304.79998779296875,"1":106},"flags":{},"order":88,"mode":2,"inputs":[{"name":"motion_model","type":"MOTION_MODEL_ADE","link":95,"slot_index":0},{"name":"motion_lora","type":"MOTION_LORA","link":null},{"name":"scale_multival","type":"MULTIVAL","link":null},{"name":"effect_multival","type":"MULTIVAL","link":null},{"name":"ad_keyframes","type":"AD_KEYFRAMES","link":null}],"outputs":[{"name":"M_MODELS","type":"M_MODELS","links":[93],"shape":3}],"properties":{"Node name for S&R":"ADE_ApplyAnimateDiffModelSimple"}},{"id":172,"type":"Reroute","pos":[3265.052253507059,1346.7889190447831],"size":[75,26],"flags":{},"order":76,"mode":2,"inputs":[{"name":"","type":"*","link":198}],"outputs":[{"name":"","type":"IMAGE","links":[199],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":76,"type":"ADE_UseEvolvedSampling","pos":[3587.052253507059,503.78891904478326],"size":{"0":315,"1":118},"flags":{},"order":135,"mode":2,"inputs":[{"name":"model","type":"MODEL","link":196},{"name":"m_models","type":"M_MODELS","link":93,"slot_index":1},{"name":"context_options","type":"CONTEXT_OPTIONS","link":94,"slot_index":2},{"name":"sample_settings","type":"SAMPLE_SETTINGS","link":null}],"outputs":[{"name":"MODEL","type":"MODEL","links":[177],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ADE_UseEvolvedSampling"},"widgets_values":["sqrt_linear (AnimateDiff)"]},{"id":132,"type":"GetNode","pos":[4194.052253507064,1135.7889190447831],"size":{"0":210,"1":58},"flags":{},"order":2,"mode":2,"outputs":[{"name":"LATENT","type":"LATENT","links":[154],"slot_index":0}],"title":"Get_LATENT","properties":{},"widgets_values":["LATENT"],"color":"#323","bgcolor":"#535"},{"id":133,"type":"GetNode","pos":[4670,820],"size":{"0":210,"1":58},"flags":{},"order":3,"mode":2,"outputs":[{"name":"VAE","type":"VAE","links":[155],"slot_index":0}],"title":"Get_VAE","properties":{},"widgets_values":["VAE"],"color":"#322","bgcolor":"#533"},{"id":193,"type":"Reroute","pos":[3270,1470],"size":[75,26],"flags":{},"order":77,"mode":2,"inputs":[{"name":"","type":"*","link":213}],"outputs":[{"name":"","type":"MASK","links":[214,215],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":194,"type":"Reroute","pos":[3690,1470],"size":[75,26],"flags":{},"order":93,"mode":2,"inputs":[{"name":"","type":"*","link":215}],"outputs":[{"name":"","type":"MASK","links":[216],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":100,"type":"VAEDecode","pos":[6706.852901813973,-1574.9284065043314],"size":{"0":210,"1":46},"flags":{},"order":123,"mode":2,"inputs":[{"name":"samples","type":"LATENT","link":123},{"name":"vae","type":"VAE","link":164}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[125,236],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":227,"type":"Reroute","pos":[7665,-558],"size":[75,26],"flags":{},"order":139,"mode":2,"inputs":[{"name":"","type":"*","link":238}],"outputs":[{"name":"","type":"IMAGE","links":[],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#323","bgcolor":"#535"},{"id":170,"type":"Reroute","pos":[2257,495],"size":[75,26],"flags":{},"order":125,"mode":2,"inputs":[{"name":"","type":"*","link":195}],"outputs":[{"name":"","type":"MODEL","links":[196],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":231,"type":"Note","pos":[7658,-640],"size":{"0":210,"1":58},"flags":{},"order":4,"mode":2,"properties":{"text":""},"widgets_values":["Connect the frames which require face detailer"],"color":"#222","bgcolor":"#000"},{"id":4,"type":"PrimitiveNode","pos":[-1314.0534301936648,-642.5542852055955],"size":{"0":210,"1":82},"flags":{"collapsed":false},"order":5,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[270],"slot_index":0,"widget":{"name":"custom_width"}}],"properties":{"Run widget replace on values":false},"widgets_values":[512,"fixed"],"color":"#322","bgcolor":"#533"},{"id":7,"type":"ImageCrop+","pos":[0,-550],"size":{"0":210,"1":147.71444702148438},"flags":{},"order":109,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":9},{"name":"width","type":"INT","link":6,"widget":{"name":"width"}},{"name":"height","type":"INT","link":7,"widget":{"name":"height"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[167,261],"shape":3,"slot_index":0},{"name":"x","type":"INT","links":null,"shape":3},{"name":"y","type":"INT","links":null,"shape":3}],"properties":{"Node name for S&R":"ImageCrop+"},"widgets_values":[256,256,"center",0,-70]},{"id":16,"type":"CLIPSetLastLayer","pos":[1394,-417],"size":{"0":210,"1":58},"flags":{},"order":100,"mode":2,"inputs":[{"name":"clip","type":"CLIP","link":17}],"outputs":[{"name":"CLIP","type":"CLIP","links":[148],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPSetLastLayer"},"widgets_values":[-1]},{"id":127,"type":"SetNode","pos":[1618,-420],"size":{"0":210,"1":58},"flags":{},"order":108,"mode":2,"inputs":[{"name":"CLIP","type":"CLIP","link":148}],"outputs":[{"name":"CLIP","type":"CLIP","links":[193,194],"slot_index":0}],"title":"Set_CLIP_BKG","properties":{"previousName":"CLIP_BKG"},"widgets_values":["CLIP_BKG"],"color":"#432","bgcolor":"#653"},{"id":21,"type":"CLIPTextEncode","pos":[1865,-352],"size":{"0":296.63507080078125,"1":94.3865737915039},"flags":{},"order":117,"mode":2,"inputs":[{"name":"clip","type":"CLIP","link":194}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[23],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["NSFW, bad quality, worst quality, watermark"],"color":"#322","bgcolor":"#533"},{"id":27,"type":"ControlNetLoaderAdvanced","pos":[2664.977442276746,-641.0829566731969],"size":{"0":367.79998779296875,"1":58},"flags":{},"order":6,"mode":2,"inputs":[{"name":"timestep_keyframe","type":"TIMESTEP_KEYFRAME","link":null}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[29],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ControlNetLoaderAdvanced"},"widgets_values":["control_v11f1e_sd15_tile.pth"]},{"id":22,"type":"ACN_AdvancedControlNetApply","pos":[2265,-531],"size":{"0":355.20001220703125,"1":266},"flags":{},"order":127,"mode":2,"inputs":[{"name":"positive","type":"CONDITIONING","link":22},{"name":"negative","type":"CONDITIONING","link":23},{"name":"control_net","type":"CONTROL_NET","link":24},{"name":"image","type":"IMAGE","link":27},{"name":"mask_optional","type":"MASK","link":null},{"name":"timestep_kf","type":"TIMESTEP_KEYFRAME","link":null},{"name":"latent_kf_override","type":"LATENT_KEYFRAME","link":null},{"name":"weights_override","type":"CONTROL_NET_WEIGHTS","link":null},{"name":"model_optional","type":"MODEL","link":null}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[31],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[32],"shape":3,"slot_index":1},{"name":"model_opt","type":"MODEL","links":null,"shape":3}],"properties":{"Node name for S&R":"ACN_AdvancedControlNetApply"},"widgets_values":[0.5,0,0.5]},{"id":26,"type":"ACN_AdvancedControlNetApply","pos":[2685,-531],"size":{"0":355.20001220703125,"1":266},"flags":{},"order":137,"mode":2,"inputs":[{"name":"positive","type":"CONDITIONING","link":31},{"name":"negative","type":"CONDITIONING","link":32},{"name":"control_net","type":"CONTROL_NET","link":29},{"name":"image","type":"IMAGE","link":34},{"name":"mask_optional","type":"MASK","link":null},{"name":"timestep_kf","type":"TIMESTEP_KEYFRAME","link":null},{"name":"latent_kf_override","type":"LATENT_KEYFRAME","link":null},{"name":"weights_override","type":"CONTROL_NET_WEIGHTS","link":null},{"name":"model_optional","type":"MODEL","link":null}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[169],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[170],"shape":3,"slot_index":1},{"name":"model_opt","type":"MODEL","links":null,"shape":3}],"properties":{"Node name for S&R":"ACN_AdvancedControlNetApply"},"widgets_values":[0.3,0,0.3]},{"id":145,"type":"GetNode","pos":[1515,-91],"size":{"0":210,"1":58},"flags":{},"order":7,"mode":2,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[168],"slot_index":0}],"title":"Get_BKG_image","properties":{},"widgets_values":["BKG_image"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":25,"type":"AIO_Preprocessor","pos":[1865,-201],"size":{"0":315,"1":82},"flags":{},"order":89,"mode":2,"inputs":[{"name":"image","type":"IMAGE","link":26}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[27],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"AIO_Preprocessor"},"widgets_values":["DepthAnythingPreprocessor",512]},{"id":146,"type":"SetNode","pos":[3085,-571],"size":{"0":211.60000610351562,"1":58},"flags":{},"order":143,"mode":2,"inputs":[{"name":"CONDITIONING","type":"CONDITIONING","link":169}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[187],"slot_index":0}],"title":"Set_BKG_POS","properties":{"previousName":"BKG_POS"},"widgets_values":["BKG_POS"],"color":"#332922","bgcolor":"#593930"},{"id":147,"type":"SetNode","pos":[3075,-461],"size":{"0":211.60000610351562,"1":58},"flags":{},"order":144,"mode":2,"inputs":[{"name":"CONDITIONING","type":"CONDITIONING","link":170}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[188],"slot_index":0}],"title":"Set_BKG_NEG","properties":{"previousName":"BKG_NEG"},"widgets_values":["BKG_NEG"],"color":"#332922","bgcolor":"#593930"},{"id":165,"type":"GetNode","pos":[3075,-341],"size":{"0":210,"1":58},"flags":{},"order":8,"mode":2,"outputs":[{"name":"LATENT","type":"LATENT","links":[190],"slot_index":0}],"title":"Get_LATENT","properties":{},"widgets_values":["LATENT"],"color":"#323","bgcolor":"#535"},{"id":246,"type":"FreeU_V2","pos":[1581,-907],"size":{"0":210,"1":130},"flags":{},"order":99,"mode":2,"inputs":[{"name":"model","type":"MODEL","link":264}],"outputs":[{"name":"MODEL","type":"MODEL","links":[265],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"FreeU_V2"},"widgets_values":[1.3,1.4,0.9,0.2]},{"id":40,"type":"ADE_ApplyAnimateDiffModelSimple","pos":[2335,-831],"size":{"0":304.79998779296875,"1":106},"flags":{},"order":73,"mode":2,"inputs":[{"name":"motion_model","type":"MOTION_MODEL_ADE","link":48,"slot_index":0},{"name":"motion_lora","type":"MOTION_LORA","link":null},{"name":"scale_multival","type":"MULTIVAL","link":null,"slot_index":2},{"name":"effect_multival","type":"MULTIVAL","link":null},{"name":"ad_keyframes","type":"AD_KEYFRAMES","link":null}],"outputs":[{"name":"M_MODELS","type":"M_MODELS","links":[275],"shape":3}],"properties":{"Node name for S&R":"ADE_ApplyAnimateDiffModelSimple"}},{"id":41,"type":"ADE_LoadAnimateDiffModel","pos":[1998,-825],"size":{"0":315,"1":58},"flags":{},"order":9,"mode":2,"inputs":[{"name":"ad_settings","type":"AD_SETTINGS","link":null}],"outputs":[{"name":"MOTION_MODEL","type":"MOTION_MODEL_ADE","links":[48],"shape":3}],"properties":{"Node name for S&R":"ADE_LoadAnimateDiffModel"},"widgets_values":["v3_sd15_mm.ckpt"]},{"id":39,"type":"ADE_AnimateDiffUniformContextOptions","pos":[2695,-1217],"size":{"0":317.4000244140625,"1":270},"flags":{"collapsed":false},"order":10,"mode":2,"inputs":[{"name":"prev_context","type":"CONTEXT_OPTIONS","link":null},{"name":"view_opts","type":"VIEW_OPTS","link":null}],"outputs":[{"name":"CONTEXT_OPTS","type":"CONTEXT_OPTIONS","links":[276],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ADE_AnimateDiffUniformContextOptions"},"widgets_values":[16,1,4,"uniform",false,"flat",false,0,1]},{"id":37,"type":"ADE_UseEvolvedSampling","pos":[2685,-901],"size":{"0":315,"1":118},"flags":{},"order":107,"mode":2,"inputs":[{"name":"model","type":"MODEL","link":265},{"name":"m_models","type":"M_MODELS","link":275,"slot_index":1},{"name":"context_options","type":"CONTEXT_OPTIONS","link":276,"slot_index":2},{"name":"sample_settings","type":"SAMPLE_SETTINGS","link":null,"slot_index":3}],"outputs":[{"name":"MODEL","type":"MODEL","links":[180],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ADE_UseEvolvedSampling"},"widgets_values":["sqrt_linear (AnimateDiff)"]},{"id":157,"type":"SetNode","pos":[3095,-901],"size":{"0":210,"1":58},"flags":{},"order":115,"mode":2,"inputs":[{"name":"MODEL","type":"MODEL","link":180}],"outputs":[{"name":"MODEL","type":"MODEL","links":[273],"slot_index":0}],"title":"Set_AD_BKG","properties":{"previousName":"AD_BKG"},"widgets_values":["AD_BKG"],"color":"#223","bgcolor":"#335"},{"id":29,"type":"KSampler","pos":[3385,-581],"size":{"0":315,"1":262},"flags":{},"order":147,"mode":2,"inputs":[{"name":"model","type":"MODEL","link":273},{"name":"positive","type":"CONDITIONING","link":187},{"name":"negative","type":"CONDITIONING","link":188},{"name":"latent_image","type":"LATENT","link":190}],"outputs":[{"name":"LATENT","type":"LATENT","links":[42,182],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[1106285031691928,"fixed",12,8,"dpmpp_2m_sde","karras",1]},{"id":159,"type":"SetNode","pos":[3481,-688],"size":{"0":210,"1":58},"flags":{},"order":151,"mode":2,"inputs":[{"name":"LATENT","type":"LATENT","link":182}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_BKG_LATENT","properties":{"previousName":"BKG_LATENT"},"widgets_values":["BKG_LATENT"],"color":"#323","bgcolor":"#535"},{"id":36,"type":"VHS_VideoCombine","pos":[4127,-886],"size":[315,290],"flags":{},"order":154,"mode":2,"inputs":[{"name":"images","type":"IMAGE","link":44},{"name":"audio","type":"VHS_AUDIO","link":null},{"name":"batch_manager","type":"VHS_BatchManager","link":null}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":null,"shape":3}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":12,"loop_count":0,"filename_prefix":"AnimateDiff","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"pingpong":false,"save_output":false,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"AnimateDiff_00005.mp4","subfolder":"","type":"temp","format":"video/h264-mp4"}}}},{"id":20,"type":"CLIPTextEncode","pos":[1854.977442276745,-531.0829566731967],"size":{"0":310.491455078125,"1":121.019775390625},"flags":{},"order":116,"mode":2,"inputs":[{"name":"clip","type":"CLIP","link":193}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[22],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["green fire, storm, magic, fansty world"],"color":"#232","bgcolor":"#353"},{"id":60,"type":"LoadImage","pos":[760,1214],"size":{"0":315,"1":314},"flags":{},"order":11,"mode":2,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[72],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["young-woman-looking-down.jpg","image"]},{"id":128,"type":"SetNode","pos":[2343,965],"size":{"0":210,"1":58},"flags":{},"order":136,"mode":2,"inputs":[{"name":"CLIP","type":"CLIP","link":149}],"outputs":[{"name":"CLIP","type":"CLIP","links":[191,192],"slot_index":0}],"title":"Set_CLIP_FGD","properties":{"previousName":"CLIP_FGD"},"widgets_values":["CLIP_FGD"],"color":"#432","bgcolor":"#653"},{"id":54,"type":"CLIPTextEncode","pos":[2586,852],"size":{"0":310.491455078125,"1":121.019775390625},"flags":{},"order":141,"mode":2,"inputs":[{"name":"clip","type":"CLIP","link":191}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[75],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["woman dancing, long trousers, RGB"],"color":"#232","bgcolor":"#353"},{"id":55,"type":"CLIPTextEncode","pos":[2586,1042],"size":{"0":296.63507080078125,"1":94.3865737915039},"flags":{},"order":142,"mode":2,"inputs":[{"name":"clip","type":"CLIP","link":192}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[76],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["NSFW, bad quality, worst quality, watermark"],"color":"#322","bgcolor":"#533"},{"id":63,"type":"ACN_AdvancedControlNetApply","pos":[2996,902],"size":{"0":355.20001220703125,"1":266},"flags":{},"order":146,"mode":2,"inputs":[{"name":"positive","type":"CONDITIONING","link":75},{"name":"negative","type":"CONDITIONING","link":76},{"name":"control_net","type":"CONTROL_NET","link":74},{"name":"image","type":"IMAGE","link":151},{"name":"mask_optional","type":"MASK","link":212},{"name":"timestep_kf","type":"TIMESTEP_KEYFRAME","link":null},{"name":"latent_kf_override","type":"LATENT_KEYFRAME","link":null},{"name":"weights_override","type":"CONTROL_NET_WEIGHTS","link":null},{"name":"model_optional","type":"MODEL","link":null}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[81],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[82],"shape":3,"slot_index":1},{"name":"model_opt","type":"MODEL","links":null,"shape":3}],"properties":{"Node name for S&R":"ACN_AdvancedControlNetApply"},"widgets_values":[0.3,0,0.6]},{"id":69,"type":"ControlNetLoaderAdvanced","pos":[3386.052253507059,771.7889190447833],"size":{"0":367.79998779296875,"1":58},"flags":{},"order":12,"mode":2,"inputs":[{"name":"timestep_keyframe","type":"TIMESTEP_KEYFRAME","link":null}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[80],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ControlNetLoaderAdvanced"},"widgets_values":["control_v11f1p_sd15_depth.pth"]},{"id":68,"type":"ACN_AdvancedControlNetApply","pos":[3406.052253507059,901.7889190447835],"size":{"0":355.20001220703125,"1":266},"flags":{},"order":149,"mode":2,"inputs":[{"name":"positive","type":"CONDITIONING","link":81},{"name":"negative","type":"CONDITIONING","link":82},{"name":"control_net","type":"CONTROL_NET","link":80},{"name":"image","type":"IMAGE","link":87},{"name":"mask_optional","type":"MASK","link":214},{"name":"timestep_kf","type":"TIMESTEP_KEYFRAME","link":null},{"name":"latent_kf_override","type":"LATENT_KEYFRAME","link":null},{"name":"weights_override","type":"CONTROL_NET_WEIGHTS","link":null},{"name":"model_optional","type":"MODEL","link":null}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[84],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[85],"shape":3,"slot_index":1},{"name":"model_opt","type":"MODEL","links":null,"shape":3}],"properties":{"Node name for S&R":"ACN_AdvancedControlNetApply"},"widgets_values":[0.7000000000000001,0,1]},{"id":71,"type":"ControlNetLoaderAdvanced","pos":[3796.052253507059,771.7889190447833],"size":{"0":367.79998779296875,"1":58},"flags":{},"order":13,"mode":2,"inputs":[{"name":"timestep_keyframe","type":"TIMESTEP_KEYFRAME","link":null}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[83],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ControlNetLoaderAdvanced"},"widgets_values":["control_v11p_sd15_openpose.pth"]},{"id":70,"type":"ACN_AdvancedControlNetApply","pos":[3796.052253507059,891.7889190447836],"size":{"0":355.20001220703125,"1":266},"flags":{},"order":153,"mode":2,"inputs":[{"name":"positive","type":"CONDITIONING","link":84},{"name":"negative","type":"CONDITIONING","link":85},{"name":"control_net","type":"CONTROL_NET","link":83},{"name":"image","type":"IMAGE","link":89},{"name":"mask_optional","type":"MASK","link":216},{"name":"timestep_kf","type":"TIMESTEP_KEYFRAME","link":null},{"name":"latent_kf_override","type":"LATENT_KEYFRAME","link":null},{"name":"weights_override","type":"CONTROL_NET_WEIGHTS","link":null},{"name":"model_optional","type":"MODEL","link":null}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[173],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[174],"shape":3,"slot_index":1},{"name":"model_opt","type":"MODEL","links":null,"shape":3}],"properties":{"Node name for S&R":"ACN_AdvancedControlNetApply"},"widgets_values":[1,0,0.8]},{"id":131,"type":"GetNode","pos":[2603,1351],"size":{"0":210,"1":58},"flags":{},"order":14,"mode":2,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[151,153,198],"slot_index":0}],"title":"Get_Video_frames","properties":{},"widgets_values":["Video_frames"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":72,"type":"DepthAnythingPreprocessor","pos":[3033,1224],"size":{"0":315,"1":82},"flags":{},"order":75,"mode":2,"inputs":[{"name":"image","type":"IMAGE","link":153}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[87],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"DepthAnythingPreprocessor"},"widgets_values":["depth_anything_vitl14.pth",512]},{"id":73,"type":"DWPreprocessor","pos":[3439,1225],"size":{"0":315,"1":198},"flags":{},"order":92,"mode":2,"inputs":[{"name":"image","type":"IMAGE","link":199}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[89],"shape":3,"slot_index":0},{"name":"POSE_KEYPOINT","type":"POSE_KEYPOINT","links":null,"shape":3}],"properties":{"Node name for S&R":"DWPreprocessor"},"widgets_values":["enable","enable","enable",512,"yolox_l.onnx","dw-ll_ucoco_384_bs5.torchscript.pt"]},{"id":192,"type":"GetNode","pos":[2610,1480],"size":{"0":210,"1":58},"flags":{},"order":15,"mode":2,"outputs":[{"name":"MASK","type":"MASK","links":[212,213],"slot_index":0}],"title":"Get_FGD_MASK","properties":{},"widgets_values":["FGD_MASK"],"color":"#233","bgcolor":"#355"},{"id":154,"type":"SetNode","pos":[4172,512],"size":{"0":210,"1":58},"flags":{},"order":140,"mode":2,"inputs":[{"name":"MODEL","type":"MODEL","link":177}],"outputs":[{"name":"MODEL","type":"MODEL","links":[200],"slot_index":0}],"title":"Set_AD_FGD","properties":{"previousName":"AD_FGD"},"widgets_values":["AD_FGD"],"color":"#223","bgcolor":"#335"},{"id":74,"type":"KSampler","pos":[4580,930],"size":{"0":315,"1":262},"flags":{},"order":158,"mode":2,"inputs":[{"name":"model","type":"MODEL","link":200},{"name":"positive","type":"CONDITIONING","link":201},{"name":"negative","type":"CONDITIONING","link":202},{"name":"latent_image","type":"LATENT","link":154}],"outputs":[{"name":"LATENT","type":"LATENT","links":[100],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[172912685509677,"fixed",8,1.5,"lcm","ddim_uniform",1]},{"id":83,"type":"ToBasicPipe","pos":[5418,-1042],"size":{"0":182.1078338623047,"1":106},"flags":{},"order":78,"mode":2,"inputs":[{"name":"model","type":"MODEL","link":181},{"name":"clip","type":"CLIP","link":159},{"name":"vae","type":"VAE","link":158},{"name":"positive","type":"CONDITIONING","link":171},{"name":"negative","type":"CONDITIONING","link":172}],"outputs":[{"name":"basic_pipe","type":"BASIC_PIPE","links":[116],"shape":3,"slot_index":0}],"title":"ToBasicPipe_BKG","properties":{"Node name for S&R":"ToBasicPipe"}},{"id":158,"type":"GetNode","pos":[5137,-1140],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":16,"mode":2,"outputs":[{"name":"MODEL","type":"MODEL","links":[181],"slot_index":0}],"title":"Get_AD_BKG","properties":{},"widgets_values":["AD_BKG"],"color":"#223","bgcolor":"#335"},{"id":137,"type":"GetNode","pos":[5141,-1097],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":17,"mode":2,"outputs":[{"name":"CLIP","type":"CLIP","links":[159],"slot_index":0}],"title":"Get_CLIP_BKG","properties":{},"widgets_values":["CLIP_BKG"],"color":"#432","bgcolor":"#653"},{"id":136,"type":"GetNode","pos":[5137,-1034],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":18,"mode":2,"outputs":[{"name":"VAE","type":"VAE","links":[158],"slot_index":0}],"title":"Get_VAE","properties":{},"widgets_values":["VAE"],"color":"#322","bgcolor":"#533"},{"id":148,"type":"GetNode","pos":[5121,-971],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":19,"mode":2,"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[171],"slot_index":0}],"title":"Get_BKG_POS","properties":{},"widgets_values":["BKG_POS"],"color":"#332922","bgcolor":"#593930"},{"id":149,"type":"GetNode","pos":[5123,-899],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":20,"mode":2,"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[172],"slot_index":0}],"title":"Get_BKG_NEG","properties":{},"widgets_values":["BKG_NEG"],"color":"#332922","bgcolor":"#593930"},{"id":86,"type":"ToBasicPipe","pos":[5408,-682],"size":{"0":179.4713134765625,"1":106},"flags":{},"order":79,"mode":2,"inputs":[{"name":"model","type":"MODEL","link":178},{"name":"clip","type":"CLIP","link":156},{"name":"vae","type":"VAE","link":157},{"name":"positive","type":"CONDITIONING","link":175},{"name":"negative","type":"CONDITIONING","link":176}],"outputs":[{"name":"basic_pipe","type":"BASIC_PIPE","links":[117],"shape":3,"slot_index":0}],"title":"ToBasicPipe_FGD","properties":{"Node name for S&R":"ToBasicPipe"}},{"id":155,"type":"GetNode","pos":[5128,-792],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":21,"mode":2,"outputs":[{"name":"MODEL","type":"MODEL","links":[178],"slot_index":0}],"title":"Get_AD_FGD","properties":{},"widgets_values":["AD_FGD"],"color":"#223","bgcolor":"#335"},{"id":134,"type":"GetNode","pos":[5128,-722],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":22,"mode":2,"outputs":[{"name":"CLIP","type":"CLIP","links":[156],"slot_index":0}],"title":"Get_CLIP_FGD","properties":{},"widgets_values":["CLIP_FGD"],"color":"#432","bgcolor":"#653"},{"id":135,"type":"GetNode","pos":[5128,-642],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":23,"mode":2,"outputs":[{"name":"VAE","type":"VAE","links":[157],"slot_index":0}],"title":"Get_VAE","properties":{},"widgets_values":["VAE"],"color":"#322","bgcolor":"#533"},{"id":152,"type":"GetNode","pos":[5118,-592],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":24,"mode":2,"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[175],"slot_index":0}],"title":"Get_FGD_POS","properties":{},"widgets_values":["FGD_POS"],"color":"#332922","bgcolor":"#593930"},{"id":153,"type":"GetNode","pos":[5108,-522],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":25,"mode":2,"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[176],"slot_index":0}],"title":"Get_FGD_POS","properties":{},"widgets_values":["FGD_POS"],"color":"#332922","bgcolor":"#593930"},{"id":95,"type":"KSamplerProvider","pos":[5628,-1042],"size":{"0":315,"1":202},"flags":{},"order":94,"mode":2,"inputs":[{"name":"basic_pipe","type":"BASIC_PIPE","link":116}],"outputs":[{"name":"KSAMPLER","type":"KSAMPLER","links":[279,281],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"KSamplerProvider"},"widgets_values":[47136626066926,"fixed",8,8,"dpmpp_2m_sde","karras",0.5]},{"id":96,"type":"KSamplerProvider","pos":[5628,-772],"size":{"0":315,"1":202},"flags":{},"order":95,"mode":2,"inputs":[{"name":"basic_pipe","type":"BASIC_PIPE","link":117}],"outputs":[{"name":"KSAMPLER","type":"KSAMPLER","links":[280,282],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"KSamplerProvider"},"widgets_values":[172912685509677,"fixed",8,1.5,"lcm","ddim_uniform",1]},{"id":105,"type":"TwoSamplersForMask","pos":[6384.338928696635,-217.4413337451159],"size":{"0":186.05453491210938,"1":86},"flags":{},"order":103,"mode":2,"inputs":[{"name":"latent_image","type":"LATENT","link":184},{"name":"base_sampler","type":"KSAMPLER","link":279},{"name":"mask_sampler","type":"KSAMPLER","link":280},{"name":"mask","type":"MASK","link":186}],"outputs":[{"name":"LATENT","type":"LATENT","links":[142],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"TwoSamplersForMask"}},{"id":161,"type":"GetNode","pos":[6174.338928696635,-117.44133374511594],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":26,"mode":2,"outputs":[{"name":"LATENT","type":"LATENT","links":[184],"slot_index":0}],"title":"Get_BKG_LATENT","properties":{},"widgets_values":["BKG_LATENT"],"color":"#323","bgcolor":"#535"},{"id":162,"type":"GetNode","pos":[6174.338928696635,-57.44133374511593],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":27,"mode":2,"outputs":[{"name":"MASK","type":"MASK","links":[186],"slot_index":0}],"title":"Get_FGD_MASK","properties":{},"widgets_values":["FGD_MASK"],"color":"#233","bgcolor":"#355"},{"id":225,"type":"Reroute","pos":[6970.338928696635,-460.4413337451159],"size":[75,26],"flags":{},"order":122,"mode":2,"inputs":[{"name":"","type":"*","link":237}],"outputs":[{"name":"","type":"IMAGE","links":[241],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#332922","bgcolor":"#593930"},{"id":139,"type":"GetNode","pos":[6136.852901813973,-1474.9284065043314],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":28,"mode":2,"outputs":[{"name":"MASK","type":"MASK","links":[161],"slot_index":0}],"title":"Get_FGD_MASK","properties":{},"widgets_values":["FGD_MASK"],"color":"#233","bgcolor":"#355"},{"id":140,"type":"GetNode","pos":[6156.852901813973,-1434.9284065043314],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":29,"mode":2,"outputs":[{"name":"VAE","type":"VAE","links":[163],"slot_index":0}],"title":"Get_VAE","properties":{},"widgets_values":["VAE"],"color":"#322","bgcolor":"#533"},{"id":99,"type":"UpscaleModelLoader","pos":[6106.852901813973,-1384.9284065043314],"size":{"0":315,"1":58},"flags":{"collapsed":true},"order":30,"mode":2,"outputs":[{"name":"UPSCALE_MODEL","type":"UPSCALE_MODEL","links":[122],"shape":3}],"properties":{"Node name for S&R":"UpscaleModelLoader"},"widgets_values":["RealESRGAN_x2.pth"]},{"id":94,"type":"TwoSamplersForMaskUpscalerProvider","pos":[6356.852901813973,-1384.9284065043314],"size":{"0":330,"1":290},"flags":{},"order":104,"mode":2,"inputs":[{"name":"base_sampler","type":"KSAMPLER","link":281},{"name":"mask_sampler","type":"KSAMPLER","link":282},{"name":"mask","type":"MASK","link":161},{"name":"vae","type":"VAE","link":163},{"name":"full_sampler_opt","type":"KSAMPLER","link":null},{"name":"upscale_model_opt","type":"UPSCALE_MODEL","link":122,"slot_index":5},{"name":"pk_hook_base_opt","type":"PK_HOOK","link":null},{"name":"pk_hook_mask_opt","type":"PK_HOOK","link":null},{"name":"pk_hook_full_opt","type":"PK_HOOK","link":null}],"outputs":[{"name":"UPSCALER","type":"UPSCALER","links":[115],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"TwoSamplersForMaskUpscalerProvider"},"widgets_values":["nearest-exact","none",false,512]},{"id":90,"type":"IterativeLatentUpscale","pos":[6346.852901813973,-1594.9284065043314],"size":{"0":344.3999938964844,"1":150},"flags":{},"order":112,"mode":2,"inputs":[{"name":"samples","type":"LATENT","link":185},{"name":"upscaler","type":"UPSCALER","link":115}],"outputs":[{"name":"latent","type":"LATENT","links":[123],"shape":3,"slot_index":0},{"name":"vae","type":"VAE","links":null,"shape":3}],"properties":{"Node name for S&R":"IterativeLatentUpscale"},"widgets_values":[1.5,2,"","simple"]},{"id":222,"type":"Fast Groups Muter (rgthree)","pos":{"0":7625,"1":-772,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":272.4358825683594,"1":58},"flags":{"collapsed":false},"order":31,"mode":2,"inputs":[],"outputs":[{"name":"OPT_CONNECTION","type":"*","links":null}],"properties":{"matchColors":"","matchTitle":"7-","showNav":"on","sort":"position","customSortAlphabet":"","toggleRestriction":"max one"},"color":"#322","bgcolor":"#533"},{"id":228,"type":"Reroute","pos":[7666,-479],"size":[75,26],"flags":{},"order":128,"mode":2,"inputs":[{"name":"","type":"*","link":241}],"outputs":[{"name":"","type":"IMAGE","links":[283],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#332922","bgcolor":"#593930"},{"id":229,"type":"UltralyticsDetectorProvider","pos":[7717,-304],"size":{"0":315,"1":78},"flags":{"collapsed":true},"order":32,"mode":2,"outputs":[{"name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":[240],"shape":3,"slot_index":0},{"name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","links":null,"shape":3}],"properties":{"Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["bbox/face_yolov8m.pt"]},{"id":232,"type":"SAMLoader","pos":[7719,-225],"size":{"0":315,"1":82},"flags":{"collapsed":true},"order":33,"mode":2,"outputs":[{"name":"SAM_MODEL","type":"SAM_MODEL","links":[242],"shape":3}],"properties":{"Node name for S&R":"SAMLoader"},"widgets_values":["sam_vit_b_01ec64.pth","AUTO"]},{"id":233,"type":"Reroute","pos":[7859,-539],"size":[75,26],"flags":{},"order":138,"mode":2,"inputs":[{"name":"","type":"*","link":283}],"outputs":[{"name":"","type":"IMAGE","links":[244,251],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":226,"type":"ImpactSimpleDetectorSEGS_for_AD","pos":[7981,-302],"size":{"0":319.20001220703125,"1":334},"flags":{},"order":145,"mode":2,"inputs":[{"name":"bbox_detector","type":"BBOX_DETECTOR","link":240},{"name":"image_frames","type":"IMAGE","link":244},{"name":"sam_model_opt","type":"SAM_MODEL","link":242,"slot_index":2},{"name":"segm_detector_opt","type":"SEGM_DETECTOR","link":null}],"outputs":[{"name":"SEGS","type":"SEGS","links":[252],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImpactSimpleDetectorSEGS_for_AD"},"widgets_values":[0.5,5,3,10,0.93,0,0,0.7,"Combine neighboring frames","Combined mask"]},{"id":237,"type":"ToBasicPipe","pos":[8370,-711],"size":{"0":161.1999969482422,"1":106},"flags":{},"order":96,"mode":2,"inputs":[{"name":"model","type":"MODEL","link":253},{"name":"clip","type":"CLIP","link":254},{"name":"vae","type":"VAE","link":259},{"name":"positive","type":"CONDITIONING","link":257},{"name":"negative","type":"CONDITIONING","link":258}],"outputs":[{"name":"basic_pipe","type":"BASIC_PIPE","links":[266],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ToBasicPipe"}},{"id":238,"type":"GetNode","pos":[8131,-766],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":34,"mode":2,"outputs":[{"name":"MODEL","type":"MODEL","links":[253],"slot_index":0}],"title":"Get_AD_FGD","properties":{},"widgets_values":["AD_FGD"],"color":"#223","bgcolor":"#335"},{"id":239,"type":"GetNode","pos":[7931,-662],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":35,"mode":2,"outputs":[{"name":"CLIP","type":"CLIP","links":[254,255,256],"slot_index":0}],"title":"Get_CLIP_FGD","properties":{},"widgets_values":["CLIP_FGD"],"color":"#432","bgcolor":"#653"},{"id":242,"type":"GetNode","pos":[8160,-635],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":36,"mode":2,"outputs":[{"name":"VAE","type":"VAE","links":[259],"slot_index":0}],"title":"Get_VAE","properties":{},"widgets_values":["VAE"],"color":"#322","bgcolor":"#533"},{"id":240,"type":"CLIPTextEncode","pos":[8119,-595],"size":{"0":271.2727355957031,"1":85.0909423828125},"flags":{"collapsed":true},"order":80,"mode":2,"inputs":[{"name":"clip","type":"CLIP","link":255}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[257],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["1girl, face, brown eyes, detailed, best quality, masterpiece"]},{"id":241,"type":"CLIPTextEncode","pos":[8125,-544],"size":{"0":271.2727355957031,"1":85.0909423828125},"flags":{"collapsed":true},"order":81,"mode":2,"inputs":[{"name":"clip","type":"CLIP","link":256}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[258],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["deformed, NSFW"]},{"id":248,"type":"FILM VFI","pos":[8861,-536],"size":{"0":341.1969909667969,"1":126},"flags":{},"order":152,"mode":2,"inputs":[{"name":"frames","type":"IMAGE","link":267},{"name":"optional_interpolation_states","type":"INTERPOLATION_STATES","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[268],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"FILM VFI"},"widgets_values":["film_net_fp32.pt",5,2]},{"id":143,"type":"GetNode","pos":[-1311,413],"size":{"0":210,"1":58},"flags":{},"order":37,"mode":2,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[166],"slot_index":0}],"title":"Get_Video_frames","properties":{},"widgets_values":["Video_frames"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":43,"type":"SegmDetectorSEGS","pos":[-792,399],"size":{"0":226.07887268066406,"1":214.80833435058594},"flags":{},"order":97,"mode":2,"inputs":[{"name":"segm_detector","type":"SEGM_DETECTOR","link":284,"slot_index":0},{"name":"image","type":"IMAGE","link":52},{"name":"detailer_hook","type":"DETAILER_HOOK","link":null}],"outputs":[{"name":"SEGS","type":"SEGS","links":[54],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"SegmDetectorSEGS"},"widgets_values":[0.2,10,3,10,"all"],"color":"#232","bgcolor":"#353"},{"id":125,"type":"SetNode","pos":[319,400],"size":{"0":210,"1":58},"flags":{},"order":131,"mode":2,"inputs":[{"name":"MASK","type":"MASK","link":146}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_FGD_MASK","properties":{"previousName":"FGD_MASK"},"widgets_values":["FGD_MASK"],"color":"#233","bgcolor":"#355"},{"id":126,"type":"SetNode","pos":[317,515],"size":{"0":210,"1":58},"flags":{},"order":133,"mode":2,"inputs":[{"name":"MASK","type":"MASK","link":147}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_BKG_MASK","properties":{"previousName":"BKG_MASK"},"widgets_values":["BKG_MASK"],"color":"#233","bgcolor":"#355"},{"id":47,"type":"GrowMaskWithBlur","pos":[-55,397],"size":{"0":315,"1":222},"flags":{},"order":124,"mode":2,"inputs":[{"name":"mask","type":"MASK","link":56}],"outputs":[{"name":"mask","type":"MASK","links":[146,287],"shape":3,"slot_index":0},{"name":"mask_inverted","type":"MASK","links":[147,288],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"GrowMaskWithBlur"},"widgets_values":[10,0,true,false,8,1,1]},{"id":267,"type":"Note","pos":[-1297.0534301936643,-881.5542852055955],"size":{"0":258.6479187011719,"1":58},"flags":{},"order":38,"mode":0,"properties":{"text":""},"widgets_values":["For testing, use 16 or 32 frames.\nLater set to 0 to render all the frames"],"color":"#222","bgcolor":"#000"},{"id":266,"type":"Note","pos":[-1307.0534301936646,-501.5542852055958],"size":{"0":214.58767700195312,"1":80.5184326171875},"flags":{},"order":39,"mode":0,"properties":{"text":""},"widgets_values":["For vertical videos, recommended 512 width\nFor horizontal, 384 or 712\n"],"color":"#222","bgcolor":"#000"},{"id":268,"type":"Note","pos":[-150,-290],"size":{"0":214.58767700195312,"1":80.5184326171875},"flags":{},"order":40,"mode":0,"properties":{"text":""},"widgets_values":["Change scale and crop settings to adjust background image to the frames size\n"],"color":"#222","bgcolor":"#000"},{"id":160,"type":"GetNode","pos":[6119.852901813973,-1693.9284065043314],"size":{"0":210,"1":58},"flags":{},"order":41,"mode":2,"outputs":[{"name":"LATENT","type":"LATENT","links":[185],"slot_index":0}],"title":"Get_BKG_LATENT","properties":{},"widgets_values":["BKG_LATENT"],"color":"#323","bgcolor":"#535"},{"id":274,"type":"Note","pos":[6712.852901813973,-1473.9284065043314],"size":{"0":210,"1":70.73454284667969},"flags":{},"order":42,"mode":2,"properties":{"text":""},"widgets_values":["Consider the number of renders is equal to the steps x 2"],"color":"#222","bgcolor":"#000"},{"id":224,"type":"Reroute","pos":[7030,-567],"size":[75,26],"flags":{},"order":130,"mode":2,"inputs":[{"name":"","type":"*","link":236}],"outputs":[{"name":"","type":"IMAGE","links":[238],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#323","bgcolor":"#535"},{"id":80,"type":"VAEDecode","pos":[4939,945],"size":{"0":210,"1":46},"flags":{},"order":159,"mode":2,"inputs":[{"name":"samples","type":"LATENT","link":100},{"name":"vae","type":"VAE","link":155}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[99],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":236,"type":"DetailerForEachPipeForAnimateDiff","pos":[8543,-540],"size":{"0":302.3999938964844,"1":402},"flags":{},"order":148,"mode":2,"inputs":[{"name":"image_frames","type":"IMAGE","link":251},{"name":"segs","type":"SEGS","link":252},{"name":"basic_pipe","type":"BASIC_PIPE","link":266},{"name":"detailer_hook","type":"DETAILER_HOOK","link":null},{"name":"refiner_basic_pipe_opt","type":"BASIC_PIPE","link":null}],"outputs":[{"name":"image","type":"IMAGE","links":[267],"shape":3,"slot_index":0},{"name":"segs","type":"SEGS","links":null,"shape":3},{"name":"basic_pipe","type":"BASIC_PIPE","links":null,"shape":3},{"name":"cnet_images","type":"IMAGE","links":null,"shape":6}],"properties":{"Node name for S&R":"DetailerForEachPipeForAnimateDiff"},"widgets_values":[384,true,1024,912331466883827,"fixed",8,1.5,"lcm","ddim_uniform",0.5,8,0.2]},{"id":243,"type":"VHS_VideoCombine","pos":[9273,-791],"size":[355.54388427734375,901.6875438690186],"flags":{},"order":155,"mode":2,"inputs":[{"name":"images","type":"IMAGE","link":268},{"name":"audio","type":"VHS_AUDIO","link":null},{"name":"batch_manager","type":"VHS_BatchManager","link":null}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":null,"shape":3}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":25,"loop_count":0,"filename_prefix":"Face_detailer_2_samplers_video","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"Face_detailer_2_samplers_video_00008.mp4","subfolder":"","type":"output","format":"video/h264-mp4"}}}},{"id":119,"type":"VAEDecode","pos":[6734.464853972788,-217.69483683293493],"size":{"0":210,"1":46},"flags":{"collapsed":false},"order":111,"mode":2,"inputs":[{"name":"samples","type":"LATENT","link":142},{"name":"vae","type":"VAE","link":165}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[141,237],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":167,"type":"Fast Groups Muter (rgthree)","pos":{"0":-1306,"1":554,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":313.39501953125,"1":60.04961013793945},"flags":{"collapsed":false},"order":43,"mode":2,"inputs":[],"outputs":[{"name":"OPT_CONNECTION","type":"*","links":null}],"properties":{"matchColors":"","matchTitle":"3-","showNav":"on","sort":"position","customSortAlphabet":"","toggleRestriction":"default"},"color":"#322","bgcolor":"#533"},{"id":166,"type":"Fast Groups Muter (rgthree)","pos":{"0":705.9774780273438,"1":-731.0828247070312,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":315.84051513671875,"1":71.54013061523438},"flags":{"collapsed":false},"order":44,"mode":2,"inputs":[],"outputs":[{"name":"OPT_CONNECTION","type":"*","links":null}],"properties":{"matchColors":"","matchTitle":"2-","showNav":"on","sort":"position","customSortAlphabet":"","toggleRestriction":"default"},"color":"#322","bgcolor":"#533"},{"id":175,"type":"Fast Groups Muter (rgthree)","pos":{"0":5093,"1":-1392,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":432.2197570800781,"1":77.29942321777344},"flags":{"collapsed":false},"order":45,"mode":0,"inputs":[],"outputs":[{"name":"OPT_CONNECTION","type":"*","links":null}],"properties":{"matchColors":"","matchTitle":"5-","showNav":"on","sort":"position","customSortAlphabet":"","toggleRestriction":"default"},"color":"#322","bgcolor":"#533"},{"id":176,"type":"Fast Groups Muter (rgthree)","pos":{"0":5563,"1":-1417,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":432.2197570800781,"1":106},"flags":{"collapsed":false},"order":46,"mode":0,"inputs":[],"outputs":[{"name":"OPT_CONNECTION","type":"*","links":null}],"properties":{"matchColors":"","matchTitle":"6-","showNav":"on","sort":"position","customSortAlphabet":"","toggleRestriction":"max one"},"color":"#322","bgcolor":"#533"},{"id":168,"type":"Fast Groups Muter (rgthree)","pos":{"0":758,"1":570,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":435.309326171875,"1":82},"flags":{"collapsed":false},"order":47,"mode":2,"inputs":[],"outputs":[{"name":"OPT_CONNECTION","type":"*","links":null}],"properties":{"matchColors":"","matchTitle":"4-","showNav":"on","sort":"position","customSortAlphabet":"","toggleRestriction":"default"},"color":"#322","bgcolor":"#533"},{"id":130,"type":"SetNode","pos":[-589,-830],"size":{"0":210,"1":58},"flags":{},"order":102,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":150}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_Video_frames","properties":{"previousName":"Video_frames"},"widgets_values":["Video_frames"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":1,"type":"LoadImage","pos":[-638,-451],"size":{"0":315,"1":314},"flags":{},"order":48,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[4],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["pexels-alex-azabache-3243023.jpg","image"],"color":"#223","bgcolor":"#335"},{"id":2,"type":"VHS_LoadVideo","pos":[-992,-797],"size":[308.1847839355469,763.907181990774],"flags":{},"order":87,"mode":0,"inputs":[{"name":"batch_manager","type":"VHS_BatchManager","link":null},{"name":"frame_load_cap","type":"INT","link":269,"widget":{"name":"frame_load_cap"}},{"name":"custom_width","type":"INT","link":270,"widget":{"name":"custom_width"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3,150],"shape":3,"slot_index":0},{"name":"frame_count","type":"INT","links":[10],"shape":3,"slot_index":1},{"name":"audio","type":"VHS_AUDIO","links":null,"shape":3},{"name":"video_info","type":"VHS_VIDEOINFO","links":null,"shape":3}],"properties":{"Node name for S&R":"VHS_LoadVideo"},"widgets_values":{"video":"Friday vibes got us dancing shorts lillyk_1080p.mp4","force_rate":0,"force_size":"Custom Width","custom_width":512,"custom_height":512,"frame_load_cap":32,"skip_first_frames":0,"select_every_nth":2,"choose video to upload":"image","videopreview":{"hidden":false,"paused":false,"params":{"frame_load_cap":32,"skip_first_frames":0,"force_rate":0,"filename":"Friday vibes got us dancing shorts lillyk_1080p.mp4","type":"input","format":"video/mp4","select_every_nth":2,"force_size":"512x?"}}},"color":"#223","bgcolor":"#335"},{"id":124,"type":"SetNode","pos":[283,-810],"size":{"0":210,"1":58},"flags":{},"order":120,"mode":0,"inputs":[{"name":"LATENT","type":"LATENT","link":145}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_LATENT","properties":{"previousName":"LATENT"},"widgets_values":["LATENT"],"color":"#323","bgcolor":"#535"},{"id":144,"type":"SetNode","pos":[261,-547],"size":{"0":210,"1":58},"flags":{},"order":118,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":167}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_BKG_image","properties":{"previousName":"BKG_image"},"widgets_values":["BKG_image"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":244,"type":"PreviewImage","pos":[260,-395],"size":{"0":210,"1":246},"flags":{},"order":119,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":261}],"properties":{"Node name for S&R":"PreviewImage"},"color":"#223","bgcolor":"#335"},{"id":102,"type":"VHS_VideoCombine","pos":[7044,-1736],"size":[492.4057922363281,1145.4728174209595],"flags":{},"order":129,"mode":2,"inputs":[{"name":"images","type":"IMAGE","link":125},{"name":"audio","type":"VHS_AUDIO","link":null},{"name":"batch_manager","type":"VHS_BatchManager","link":null}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":null,"shape":3}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":12,"loop_count":0,"filename_prefix":"2_samplers_video_upscaled","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"2_samplers_video_00001.mp4","subfolder":"","type":"output","format":"video/h264-mp4"}}}},{"id":121,"type":"VHS_VideoCombine","pos":[7024,-395],"size":[441.49169921875,290],"flags":{"collapsed":false},"order":121,"mode":2,"inputs":[{"name":"images","type":"IMAGE","link":141},{"name":"audio","type":"VHS_AUDIO","link":null},{"name":"batch_manager","type":"VHS_BatchManager","link":null}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":null,"shape":3}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":12,"loop_count":0,"filename_prefix":"2_samplers_video","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"pingpong":false,"save_output":false,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"2_samplers_video_00003.mp4","subfolder":"","type":"temp","format":"video/h264-mp4"}}}},{"id":263,"type":"MaskPreview+","pos":[-47,1011],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":132,"mode":4,"inputs":[{"name":"mask","type":"MASK","link":287}],"properties":{"Node name for S&R":"MaskPreview+"}},{"id":264,"type":"MaskPreview+","pos":[179,1014],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":134,"mode":4,"inputs":[{"name":"mask","type":"MASK","link":288}],"properties":{"Node name for S&R":"MaskPreview+"}},{"id":280,"type":"Note","pos":[-311,1013],"size":{"0":210,"1":58},"flags":{},"order":49,"mode":0,"properties":{"text":""},"widgets_values":["Masks preview"],"color":"#222","bgcolor":"#000"},{"id":283,"type":"IPAdapter","pos":[1435,926],"size":{"0":315,"1":166},"flags":{},"order":106,"mode":2,"inputs":[{"name":"model","type":"MODEL","link":295},{"name":"ipadapter","type":"IPADAPTER","link":296},{"name":"image","type":"IMAGE","link":301},{"name":"attn_mask","type":"MASK","link":298}],"outputs":[{"name":"MODEL","type":"MODEL","links":[302],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"IPAdapter"},"widgets_values":[1,0,1]},{"id":245,"type":"FreeU_V2","pos":[1071,715],"size":{"0":210,"1":130},"flags":{},"order":84,"mode":2,"inputs":[{"name":"model","type":"MODEL","link":303}],"outputs":[{"name":"MODEL","type":"MODEL","links":[294],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"FreeU_V2"},"widgets_values":[1.3,1.4,0.9,0.2]},{"id":285,"type":"IPAdapterNoise","pos":[1158,951],"size":{"0":210,"1":106},"flags":{},"order":91,"mode":2,"inputs":[{"name":"image_optional","type":"IMAGE","link":300}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[301],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"IPAdapterNoise"},"widgets_values":["fade",0.2,0]},{"id":62,"type":"PrepImageForClipVision","pos":[1107,1131],"size":{"0":252.47021484375,"1":107.32183837890625},"flags":{},"order":74,"mode":2,"inputs":[{"name":"image","type":"IMAGE","link":72}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[300],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"PrepImageForClipVision"},"widgets_values":["LANCZOS","pad",0]},{"id":156,"type":"GetNode","pos":[1163,1305],"size":{"0":210,"1":58},"flags":{},"order":50,"mode":2,"outputs":[{"name":"MASK","type":"MASK","links":[298],"slot_index":0}],"title":"Get_FGD_MASK","properties":{},"widgets_values":["FGD_MASK"],"color":"#233","bgcolor":"#355"},{"id":282,"type":"IPAdapterUnifiedLoader","pos":[1301,716],"size":{"0":236.971923828125,"1":78},"flags":{},"order":98,"mode":2,"inputs":[{"name":"model","type":"MODEL","link":294},{"name":"ipadapter","type":"IPADAPTER","link":null}],"outputs":[{"name":"model","type":"MODEL","links":[295],"shape":3,"slot_index":0},{"name":"ipadapter","type":"IPADAPTER","links":[296],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"IPAdapterUnifiedLoader"},"widgets_values":["PLUS (high strength)"]},{"id":34,"type":"VAEDecode","pos":[3854,-583],"size":{"0":210,"1":46},"flags":{},"order":150,"mode":2,"inputs":[{"name":"samples","type":"LATENT","link":42},{"name":"vae","type":"VAE","link":160}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[44],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":138,"type":"GetNode","pos":[3851,-690],"size":{"0":210,"1":58},"flags":{},"order":51,"mode":2,"outputs":[{"name":"VAE","type":"VAE","links":[160],"slot_index":0}],"title":"Get_VAE","properties":{},"widgets_values":["VAE"],"color":"#322","bgcolor":"#533"},{"id":292,"type":"CivitAI_Checkpoint_Loader","pos":[727,835],"size":{"0":315,"1":170},"flags":{},"order":52,"mode":2,"outputs":[{"name":"MODEL","type":"MODEL","links":[303],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[304],"shape":3,"slot_index":1},{"name":"VAE","type":"VAE","links":null,"shape":3}],"properties":{"Node name for S&R":"CivitAI_Checkpoint_Loader"},"widgets_values":["4384@128713","none",4,"models/checkpoints"]},{"id":64,"type":"ControlNetLoaderAdvanced","pos":[2986.052253507059,781.7889190447833],"size":{"0":367.79998779296875,"1":58},"flags":{},"order":53,"mode":2,"inputs":[{"name":"timestep_keyframe","type":"TIMESTEP_KEYFRAME","link":null}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[74],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ControlNetLoaderAdvanced"},"widgets_values":["animateddiff_controlnet.ckpt"]},{"id":293,"type":"CivitAI_Checkpoint_Loader","pos":[695,-561],"size":{"0":315,"1":170},"flags":{},"order":54,"mode":2,"outputs":[{"name":"MODEL","type":"MODEL","links":[305],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[306],"shape":3,"slot_index":1},{"name":"VAE","type":"VAE","links":null,"shape":3}],"properties":{"Node name for S&R":"CivitAI_Checkpoint_Loader"},"widgets_values":["46422@274039","none",4,"models/checkpoints"]},{"id":294,"type":"Note","pos":[746,705],"size":{"0":279.9217834472656,"1":79.98358154296875},"flags":{},"order":55,"mode":2,"properties":{"text":""},"widgets_values":["Update: now use CivitAi Loader to download and use DreamShapers v8.\nUse cpkt name to use other installed SD1.5 model"],"color":"#222","bgcolor":"#000"},{"id":295,"type":"Note","pos":[712,-348],"size":{"0":279.9217834472656,"1":79.98358154296875},"flags":{},"order":56,"mode":2,"properties":{"text":""},"widgets_values":["Update: now use CivitAi Loader to download and use Juggernaut Reborn.\nUse cpkt name to use other installed SD1.5 model"],"color":"#222","bgcolor":"#000"},{"id":122,"type":"SetNode","pos":[1116,-186],"size":{"0":210,"1":58},"flags":{},"order":86,"mode":2,"inputs":[{"name":"VAE","type":"VAE","link":143}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_VAE","properties":{"previousName":"VAE"},"widgets_values":["VAE"],"color":"#322","bgcolor":"#533"},{"id":12,"type":"VAELoader","pos":[700,-184],"size":{"0":384.668701171875,"1":58},"flags":{},"order":57,"mode":2,"outputs":[{"name":"VAE","type":"VAE","links":[143],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAELoader"},"widgets_values":["vae-ft-mse-840000-ema-pruned.safetensors"],"color":"#322","bgcolor":"#533"},{"id":273,"type":"Note","pos":[732,1076],"size":{"0":279.9217834472656,"1":79.98358154296875},"flags":{},"order":58,"mode":2,"properties":{"text":""},"widgets_values":["Update: using IP Adapter Plus custom nodes new version (March 2024)"],"color":"#222","bgcolor":"#000"},{"id":3,"type":"PrimitiveNode","pos":[-1310,-777],"size":{"0":210,"1":82},"flags":{"collapsed":false},"order":59,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[269],"slot_index":0,"widget":{"name":"frame_load_cap"}}],"properties":{"Run widget replace on values":false},"widgets_values":[32,"fixed"],"color":"#322","bgcolor":"#533"},{"id":6,"type":"ImageScaleBy","pos":[-300,-430],"size":{"0":245.42091369628906,"1":82},"flags":{},"order":83,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":4}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[9],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScaleBy"},"widgets_values":["nearest-exact",0.33]},{"id":9,"type":"EmptyLatentImage","pos":[9,-808],"size":{"0":210,"1":81.11314392089844},"flags":{"collapsed":true},"order":110,"mode":0,"inputs":[{"name":"width","type":"INT","link":11,"widget":{"name":"width"}},{"name":"height","type":"INT","link":12,"widget":{"name":"height"}},{"name":"batch_size","type":"INT","link":10,"widget":{"name":"batch_size"}}],"outputs":[{"name":"LATENT","type":"LATENT","links":[145],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"EmptyLatentImage"},"widgets_values":[512,512,1]},{"id":5,"type":"GetImageSize+","pos":[-280,-530],"size":{"0":210,"1":46},"flags":{"collapsed":true},"order":101,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3}],"outputs":[{"name":"width","type":"INT","links":[6,11],"shape":3,"slot_index":0},{"name":"height","type":"INT","links":[7,12],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"GetImageSize+"}},{"id":44,"type":"UltralyticsDetectorProvider","pos":[-1166,259],"size":{"0":315,"1":78},"flags":{"collapsed":true},"order":60,"mode":2,"outputs":[{"name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":null,"shape":3},{"name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","links":[284],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["segm/person_yolov8m-seg.pt"]},{"id":42,"type":"ImpactImageBatchToImageList","pos":[-1058,416],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":82,"mode":2,"inputs":[{"name":"image","type":"IMAGE","link":166}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[52],"shape":6,"slot_index":0}],"properties":{"Node name for S&R":"ImpactImageBatchToImageList"}},{"id":45,"type":"SegsToCombinedMask","pos":[-544,399],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":105,"mode":2,"inputs":[{"name":"segs","type":"SEGS","link":54}],"outputs":[{"name":"MASK","type":"MASK","links":[55],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"SegsToCombinedMask"}},{"id":46,"type":"MaskListToMaskBatch","pos":[-304,399],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":113,"mode":2,"inputs":[{"name":"mask","type":"MASK","link":55}],"outputs":[{"name":"MASK","type":"MASK","links":[56],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MaskListToMaskBatch"}},{"id":247,"type":"Note","pos":[4171,-1032],"size":{"0":230.64517211914062,"1":70.94440460205078},"flags":{},"order":61,"mode":2,"properties":{"text":""},"widgets_values":["Preview.\nUpdate: Activated by default, as sometimes the WF does not run without activating it."],"color":"#222","bgcolor":"#000"},{"id":150,"type":"SetNode","pos":[4192,892],"size":{"0":241.04782104492188,"1":58},"flags":{},"order":156,"mode":2,"inputs":[{"name":"CONDITIONING","type":"CONDITIONING","link":173}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[201],"slot_index":0}],"title":"Set_FGD_POS","properties":{"previousName":"FGD_POS"},"widgets_values":["FGD_POS"],"color":"#332922","bgcolor":"#593930"},{"id":151,"type":"SetNode","pos":[4188,1016],"size":{"0":258.3384094238281,"1":58},"flags":{},"order":157,"mode":2,"inputs":[{"name":"CONDITIONING","type":"CONDITIONING","link":174}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[202],"slot_index":0}],"title":"Set_FGD_NEG","properties":{"previousName":"FGD_NEG"},"widgets_values":["FGD_NEG"],"color":"#332922","bgcolor":"#593930"},{"id":79,"type":"ADE_LoadAnimateDiffModel","pos":[2846.052253507059,602.7889190447835],"size":{"0":315,"1":58},"flags":{},"order":62,"mode":2,"inputs":[{"name":"ad_settings","type":"AD_SETTINGS","link":null}],"outputs":[{"name":"MOTION_MODEL","type":"MOTION_MODEL_ADE","links":[95],"shape":3}],"properties":{"Node name for S&R":"ADE_LoadAnimateDiffModel"},"widgets_values":["v3_sd15_mm.ckpt"]},{"id":23,"type":"ControlNetLoaderAdvanced","pos":[2259,-638],"size":{"0":367.79998779296875,"1":58},"flags":{},"order":63,"mode":2,"inputs":[{"name":"timestep_keyframe","type":"TIMESTEP_KEYFRAME","link":null}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[24],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ControlNetLoaderAdvanced"},"widgets_values":["control_boxdepth_LooseControlfp16.safetensors"]},{"id":271,"type":"Note","pos":[2026,-976],"size":{"0":262.7721252441406,"1":58},"flags":{},"order":64,"mode":2,"properties":{"text":""},"widgets_values":["Use the right version of AnimateDiff\nIn the example, AnimateDiff v3"],"color":"#222","bgcolor":"#000"},{"id":272,"type":"Note","pos":[2861,425],"size":{"0":323.3152160644531,"1":75.68025207519531},"flags":{},"order":65,"mode":2,"properties":{"text":""},"widgets_values":["Use the right version of AnimateDiff\nIn the tutorial I use example, AnimateLCM, but now is set to AD V3 because AnimateLCM is not yet available in OpenArt.AI runnable workflows"],"color":"#222","bgcolor":"#000"},{"id":270,"type":"Note","pos":[1801,644],"size":{"0":295.72125244140625,"1":118.79903411865234},"flags":{},"order":66,"mode":2,"properties":{"text":""},"widgets_values":["For AnimateDiff version 3 and AnimateLCM use the corresponding adapter/Lora.\nIn the example, AnimateLCM\nOther Loras optional.\nUPDATE: removed LORA as it is not available in OpenArt.ai runnable workflows. Strengths was low, anyways. It was just an example of the flexibility of the workflows"],"color":"#222","bgcolor":"#000"},{"id":269,"type":"Note","pos":[1104,-739],"size":{"0":253.14962768554688,"1":136.0369873046875},"flags":{},"order":67,"mode":2,"properties":{"text":""},"widgets_values":["For AnimateDiff version 3 and AnimateLCM use the corresponding adapter/Lora.\nIn the example, AnimateDiff v3\nOther Loras optional\nUPDATE: removed LORA as it is not available in OpenArt.ai runnable workflows. Strengths was low, anyways. It was just an example of the flexibility of the workflows"],"color":"#222","bgcolor":"#000"},{"id":82,"type":"VHS_VideoCombine","pos":[5182,648],"size":[320,290],"flags":{},"order":160,"mode":2,"inputs":[{"name":"images","type":"IMAGE","link":99},{"name":"audio","type":"VHS_AUDIO","link":null},{"name":"batch_manager","type":"VHS_BatchManager","link":null}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":null,"shape":3}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":12,"loop_count":0,"filename_prefix":"AnimateDiff","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"pingpong":false,"save_output":false,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"AnimateDiff_00004.mp4","subfolder":"","type":"temp","format":"video/h264-mp4"}}}},{"id":296,"type":"Note","pos":[4919,673],"size":{"0":230.64517211914062,"1":70.94440460205078},"flags":{},"order":68,"mode":2,"properties":{"text":""},"widgets_values":["Preview.\nUpdate: Activated by default, as sometimes the WF does not run without activating it."],"color":"#222","bgcolor":"#000"},{"id":278,"type":"Note","pos":[-1299,-1328],"size":{"0":428.4316711425781,"1":330.7360534667969},"flags":{},"order":69,"mode":0,"properties":{"text":""},"widgets_values":["GENERAL NOTES:\n- Activate/deactivate the groups with the fast muter to process the workflow in parts. Use the muter on the right, or the individual ones in each of the groups\n\n- The sequence is:\n1- Background and video frames (with limited frame load cap)\n2- Background animation\n3- Create masks\n4- Foreground animation\n5- and 6- 2 samplers + choosing upscaling or not\n7- Facedetailer\n\n- Make sure all versions (checkpoints, Loras, AnimateDiff, IP Adapter, ControlNets) are from the same version of Stable Diffusion. This is, you cannot use a SDXL model and try to use a ControlNet for SD1.5\n\nVERSION (2) UPDATE:\n- Change IP Adapter plus nodes due to node major update\n- Added Civit AI Loader for the models used in the example\n- Changed names of the ControlGif and LooseControl CN's to match OpenArt names\n- Removed optional Loras (as they were not available in OpenArt.ai runnable workflows)\n- Image rendering of the bkg and fgd included (it seems it will work better)"],"color":"#222","bgcolor":"#000"},{"id":279,"type":"Fast Groups Muter (rgthree)","pos":{"0":-802,"1":-1285,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":485.4732666015625,"1":254.71388244628906},"flags":{},"order":70,"mode":0,"inputs":[],"outputs":[{"name":"OPT_CONNECTION","type":"*","links":null}],"properties":{"matchColors":"","matchTitle":"","showNav":true,"sort":"alphanumeric","customSortAlphabet":"","toggleRestriction":"default"},"color":"#322","bgcolor":"#533"},{"id":77,"type":"ADE_AnimateDiffUniformContextOptions","pos":[3586,173],"size":{"0":317.4000244140625,"1":270},"flags":{"collapsed":false},"order":71,"mode":2,"inputs":[{"name":"prev_context","type":"CONTEXT_OPTIONS","link":null},{"name":"view_opts","type":"VIEW_OPTS","link":null}],"outputs":[{"name":"CONTEXT_OPTS","type":"CONTEXT_OPTIONS","links":[94],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ADE_AnimateDiffUniformContextOptions"},"widgets_values":[16,1,4,"uniform",false,"flat",false,0,1]},{"id":51,"type":"Lora Loader Stack (rgthree)","pos":[1782,827],"size":{"0":315,"1":246},"flags":{},"order":114,"mode":2,"inputs":[{"name":"model","type":"MODEL","link":302},{"name":"clip","type":"CLIP","link":304}],"outputs":[{"name":"MODEL","type":"MODEL","links":[195],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[61],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"Lora Loader Stack (rgthree)"},"widgets_values":["lcm/SD1.5/pytorch_lora_weights.safetensors",1,"None",1,"None",1,"None",1]},{"id":15,"type":"Lora Loader Stack (rgthree)","pos":[1055,-561],"size":{"0":315,"1":246},"flags":{},"order":85,"mode":2,"inputs":[{"name":"model","type":"MODEL","link":305},{"name":"clip","type":"CLIP","link":306}],"outputs":[{"name":"MODEL","type":"MODEL","links":[264],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[17],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"Lora Loader Stack (rgthree)"},"widgets_values":["SD1.5/animatediff/v3_sd15_adapter.ckpt",1,"None",1,"None",1,"None",1]}],"links":[[3,2,0,5,0,"IMAGE"],[4,1,0,6,0,"IMAGE"],[6,5,0,7,1,"INT"],[7,5,1,7,2,"INT"],[9,6,0,7,0,"IMAGE"],[10,2,1,9,2,"INT"],[11,5,0,9,0,"INT"],[12,5,1,9,1,"INT"],[17,15,1,16,0,"CLIP"],[22,20,0,22,0,"CONDITIONING"],[23,21,0,22,1,"CONDITIONING"],[24,23,0,22,2,"CONTROL_NET"],[26,24,0,25,0,"IMAGE"],[27,25,0,22,3,"IMAGE"],[29,27,0,26,2,"CONTROL_NET"],[31,22,0,26,0,"CONDITIONING"],[32,22,1,26,1,"CONDITIONING"],[33,24,0,28,0,"*"],[34,28,0,26,3,"IMAGE"],[42,29,0,34,0,"LATENT"],[44,34,0,36,0,"IMAGE"],[48,41,0,40,0,"MOTION_MODEL_ADE"],[52,42,0,43,1,"IMAGE"],[54,43,0,45,0,"SEGS"],[55,45,0,46,0,"MASK"],[56,46,0,47,0,"MASK"],[61,51,1,52,0,"CLIP"],[72,60,0,62,0,"IMAGE"],[74,64,0,63,2,"CONTROL_NET"],[75,54,0,63,0,"CONDITIONING"],[76,55,0,63,1,"CONDITIONING"],[80,69,0,68,2,"CONTROL_NET"],[81,63,0,68,0,"CONDITIONING"],[82,63,1,68,1,"CONDITIONING"],[83,71,0,70,2,"CONTROL_NET"],[84,68,0,70,0,"CONDITIONING"],[85,68,1,70,1,"CONDITIONING"],[87,72,0,68,3,"IMAGE"],[89,73,0,70,3,"IMAGE"],[93,78,0,76,1,"M_MODELS"],[94,77,0,76,2,"CONTEXT_OPTIONS"],[95,79,0,78,0,"MOTION_MODEL_ADE"],[99,80,0,82,0,"IMAGE"],[100,74,0,80,0,"LATENT"],[115,94,0,90,1,"UPSCALER"],[116,83,0,95,0,"BASIC_PIPE"],[117,86,0,96,0,"BASIC_PIPE"],[122,99,0,94,5,"UPSCALE_MODEL"],[123,90,0,100,0,"LATENT"],[125,100,0,102,0,"IMAGE"],[141,119,0,121,0,"IMAGE"],[142,105,0,119,0,"LATENT"],[143,12,0,122,0,"*"],[145,9,0,124,0,"*"],[146,47,0,125,0,"*"],[147,47,1,126,0,"*"],[148,16,0,127,0,"*"],[149,52,0,128,0,"*"],[150,2,0,130,0,"*"],[151,131,0,63,3,"IMAGE"],[153,131,0,72,0,"IMAGE"],[154,132,0,74,3,"LATENT"],[155,133,0,80,1,"VAE"],[156,134,0,86,1,"CLIP"],[157,135,0,86,2,"VAE"],[158,136,0,83,2,"VAE"],[159,137,0,83,1,"CLIP"],[160,138,0,34,1,"VAE"],[161,139,0,94,2,"MASK"],[163,140,0,94,3,"VAE"],[164,141,0,100,1,"VAE"],[165,142,0,119,1,"VAE"],[166,143,0,42,0,"IMAGE"],[167,7,0,144,0,"*"],[168,145,0,24,0,"*"],[169,26,0,146,0,"*"],[170,26,1,147,0,"*"],[171,148,0,83,3,"CONDITIONING"],[172,149,0,83,4,"CONDITIONING"],[173,70,0,150,0,"*"],[174,70,1,151,0,"*"],[175,152,0,86,3,"CONDITIONING"],[176,153,0,86,4,"CONDITIONING"],[177,76,0,154,0,"*"],[178,155,0,86,0,"MODEL"],[180,37,0,157,0,"*"],[181,158,0,83,0,"MODEL"],[182,29,0,159,0,"*"],[184,161,0,105,0,"LATENT"],[185,160,0,90,0,"LATENT"],[186,162,0,105,3,"MASK"],[187,146,0,29,1,"CONDITIONING"],[188,147,0,29,2,"CONDITIONING"],[190,165,0,29,3,"LATENT"],[191,128,0,54,0,"CLIP"],[192,128,0,55,0,"CLIP"],[193,127,0,20,0,"CLIP"],[194,127,0,21,0,"CLIP"],[195,51,0,170,0,"*"],[196,170,0,76,0,"MODEL"],[198,131,0,172,0,"*"],[199,172,0,73,0,"IMAGE"],[200,154,0,74,0,"MODEL"],[201,150,0,74,1,"CONDITIONING"],[202,151,0,74,2,"CONDITIONING"],[212,192,0,63,4,"MASK"],[213,192,0,193,0,"*"],[214,193,0,68,4,"MASK"],[215,193,0,194,0,"*"],[216,194,0,70,4,"MASK"],[236,100,0,224,0,"*"],[237,119,0,225,0,"*"],[238,224,0,227,0,"*"],[240,229,0,226,0,"BBOX_DETECTOR"],[241,225,0,228,0,"*"],[242,232,0,226,2,"SAM_MODEL"],[244,233,0,226,1,"IMAGE"],[251,233,0,236,0,"IMAGE"],[252,226,0,236,1,"SEGS"],[253,238,0,237,0,"MODEL"],[254,239,0,237,1,"CLIP"],[255,239,0,240,0,"CLIP"],[256,239,0,241,0,"CLIP"],[257,240,0,237,3,"CONDITIONING"],[258,241,0,237,4,"CONDITIONING"],[259,242,0,237,2,"VAE"],[261,7,0,244,0,"IMAGE"],[264,15,0,246,0,"MODEL"],[265,246,0,37,0,"MODEL"],[266,237,0,236,2,"BASIC_PIPE"],[267,236,0,248,0,"IMAGE"],[268,248,0,243,0,"IMAGE"],[269,3,0,2,1,"INT"],[270,4,0,2,2,"INT"],[273,157,0,29,0,"MODEL"],[275,40,0,37,1,"M_MODELS"],[276,39,0,37,2,"CONTEXT_OPTIONS"],[279,95,0,105,1,"KSAMPLER"],[280,96,0,105,2,"KSAMPLER"],[281,95,0,94,0,"KSAMPLER"],[282,96,0,94,1,"KSAMPLER"],[283,228,0,233,0,"*"],[284,44,1,43,0,"SEGM_DETECTOR"],[287,47,0,263,0,"MASK"],[288,47,1,264,0,"MASK"],[294,245,0,282,0,"MODEL"],[295,282,0,283,0,"MODEL"],[296,282,1,283,1,"IPADAPTER"],[298,156,0,283,3,"MASK"],[300,62,0,285,0,"IMAGE"],[301,285,0,283,2,"IMAGE"],[302,283,0,51,0,"MODEL"],[303,292,0,245,0,"MODEL"],[304,292,1,51,1,"CLIP"],[305,293,0,15,0,"MODEL"],[306,293,1,15,1,"CLIP"]],"groups":[{"title":"1-Background and video frames preparation","bounding":[-1343,-963,1905,951],"color":"#3f789e","font_size":24},{"title":"2- Background Animation","bounding":[655,-1366,3860,1394],"color":"#8AA","font_size":24},{"title":"3- Masks","bounding":[-1345,80,1968,851],"color":"#8A8","font_size":24},{"title":"4- Foreground Animation","bounding":[685,89,4851,1458],"color":"#3f789e","font_size":24},{"title":"5- 2 samplers","bounding":[5077,-1284,909,849],"color":"#3f789e","font_size":24},{"title":"6- Render No upscale","bounding":[6119,-499,1365,1176],"color":"#b06634","font_size":24},{"title":"6- Render with upscaling","bounding":[6104,-1790,1456,1268],"color":"#a1309b","font_size":24},{"title":"7- Face Detailer","bounding":[7606,-845,2068,972],"color":"#3f789e","font_size":24}],"config":{},"extra":{},"version":0.4}