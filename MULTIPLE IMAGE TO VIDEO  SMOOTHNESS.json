{"last_node_id":832,"last_link_id":1554,"nodes":[{"id":718,"type":"Get image size","pos":[500,1840],"size":{"0":340,"1":80},"flags":{},"order":39,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1372,"label":"image"}],"outputs":[{"name":"INT","type":"INT","links":[1335,1339],"shape":3,"label":"INT","slot_index":0},{"name":"INT","type":"INT","links":[1336,1340],"shape":3,"label":"INT","slot_index":1},{"name":"TUPLE","type":"TUPLE","links":null,"shape":3,"label":"TUPLE","slot_index":2}],"properties":{"Node name for S&R":"Get image size"}},{"id":601,"type":"Reroute","pos":[-880,520],"size":[75,26],"flags":{},"order":25,"mode":0,"inputs":[{"name":"","type":"*","link":1439,"label":""}],"outputs":[{"name":"VAE","type":"VAE","links":[1472],"slot_index":0,"label":"VAE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":734,"type":"FreeU_V2","pos":[-1400,980],"size":{"0":380,"1":140},"flags":{},"order":27,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":1399,"label":"model"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[1400],"shape":3,"label":"MODEL","slot_index":0}],"properties":{"Node name for S&R":"FreeU_V2"},"widgets_values":[1.3,1.4,0.9,0.2]},{"id":673,"type":"CLIPSetLastLayer","pos":[-1400,1180],"size":{"0":380,"1":60},"flags":{},"order":28,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":1320,"label":"clip"}],"outputs":[{"name":"CLIP","type":"CLIP","links":[1278,1279],"shape":3,"label":"CLIP","slot_index":0}],"properties":{"Node name for S&R":"CLIPSetLastLayer"},"widgets_values":[-2]},{"id":694,"type":"Reroute","pos":[-800,540],"size":[82,26],"flags":{},"order":31,"mode":0,"inputs":[{"name":"","type":"*","link":1400,"label":""}],"outputs":[{"name":"MODEL","type":"MODEL","links":[1294],"label":"MODEL"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":729,"type":"Reroute","pos":[3020,-780],"size":[82,26],"flags":{},"order":65,"mode":0,"inputs":[{"name":"","type":"*","link":1353,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1433],"slot_index":0,"label":"IMAGE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":721,"type":"Note","pos":[1000,-280],"size":{"0":300,"1":300},"flags":{},"order":0,"mode":0,"properties":{"text":""},"widgets_values":["🌟提示  |  Tips\n\n加载4张图像会消耗更多的显存，并且更多的运行时间。根据你的GPU决定加载2-4张图像（或者更多张图像）。\n\nLoading 4 images will consume more graphics memory and take more runtime. Based on your GPU, decide to load 2-4 images（or more images）.\n\n❤️hope you have a nice queue prompt~\n\ne.g. 3090 4image run output video : 600 seconds"],"color":"#2899ff","bgcolor":"#1485ff"},{"id":622,"type":"RIFE VFI","pos":[1836.697092121376,1906.8437131938115],"size":{"0":320,"1":200},"flags":{},"order":64,"mode":0,"inputs":[{"name":"frames","type":"IMAGE","link":1461,"label":"frames"},{"name":"optional_interpolation_states","type":"INTERPOLATION_STATES","link":null,"label":"optional_interpolation_states"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1353],"shape":3,"label":"IMAGE","slot_index":0}],"properties":{"Node name for S&R":"RIFE VFI"},"widgets_values":["rife47.pth",10,3,true,true,1]},{"id":714,"type":"CR LoRA Stack","pos":[-1400,1300],"size":{"0":380,"1":342},"flags":{},"order":1,"mode":0,"inputs":[{"name":"lora_stack","type":"LORA_STACK","link":null,"label":"lora_stack","slot_index":0}],"outputs":[{"name":"LORA_STACK","type":"LORA_STACK","links":[1316],"shape":3,"label":"LORA_STACK","slot_index":0},{"name":"show_help","type":"STRING","links":null,"shape":3,"label":"show_help"}],"properties":{"Node name for S&R":"CR LoRA Stack"},"widgets_values":["On","IPA\\v3_sd15_adapter.ckpt",0.5,0.5,"On","SD15\\more_details.safetensors",0.45,0.45,"On","AD\\AnimateLCM_sd15_t2v_lora.safetensors",1,1],"color":"#b86fb2","bgcolor":"#a45b9e"},{"id":787,"type":"SamplerLCMCycle","pos":[1861.4893418579097,1441.3463851577753],"size":{"0":315,"1":130},"flags":{},"order":2,"mode":0,"outputs":[{"name":"SAMPLER","type":"SAMPLER","links":[1458],"shape":3,"label":"SAMPLER","slot_index":0}],"properties":{"Node name for S&R":"SamplerLCMCycle"},"widgets_values":[2,2,false,0]},{"id":788,"type":"SamplerCustom","pos":[1841.4893418579097,841.3463851577761],"size":{"0":340,"1":420},"flags":{},"order":60,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":1553,"label":"model"},{"name":"positive","type":"CONDITIONING","link":1463,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":1464,"label":"negative"},{"name":"sampler","type":"SAMPLER","link":1458,"label":"sampler"},{"name":"sigmas","type":"SIGMAS","link":1459,"label":"sigmas","slot_index":4},{"name":"latent_image","type":"LATENT","link":1462,"label":"latent_image"},{"name":"noise_seed","type":"INT","link":1476,"widget":{"name":"noise_seed"},"label":"noise_seed"}],"outputs":[{"name":"output","type":"LATENT","links":[1460],"shape":3,"label":"output","slot_index":0},{"name":"denoised_output","type":"LATENT","links":null,"shape":3,"label":"denoised_output"}],"properties":{"Node name for S&R":"SamplerCustom"},"widgets_values":[true,74717636062285,"randomize",1]},{"id":790,"type":"VAEDecode","pos":[1981.4893418579095,1321.3463851577753],"size":{"0":210,"1":46},"flags":{},"order":62,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":1460,"label":"samples"},{"name":"vae","type":"VAE","link":1475,"label":"vae"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1461],"shape":3,"label":"IMAGE","slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":759,"type":"Reroute","pos":[500,540],"size":[82,26],"flags":{},"order":41,"mode":0,"inputs":[{"name":"","type":"*","link":1490,"label":""}],"outputs":[{"name":"MODEL","type":"MODEL","links":[1411],"slot_index":0,"label":"MODEL"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":747,"type":"Reroute","pos":[1200,520],"size":[75,26],"flags":{},"order":29,"mode":0,"inputs":[{"name":"","type":"*","link":1472,"label":""}],"outputs":[{"name":"VAE","type":"VAE","links":[1473,1474],"slot_index":0,"label":"VAE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":540,"type":"Reroute","pos":[1600,520],"size":[75,26],"flags":{},"order":34,"mode":0,"inputs":[{"name":"","type":"*","link":1473,"label":""}],"outputs":[{"name":"VAE","type":"VAE","links":[1475],"slot_index":0,"label":"VAE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":655,"type":"LatentUpscaleBy","pos":[1840,700],"size":{"0":340,"1":82},"flags":{},"order":58,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":1456,"label":"samples"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[1462],"shape":3,"label":"LATENT","slot_index":0}],"properties":{"Node name for S&R":"LatentUpscaleBy"},"widgets_values":["nearest-exact",2],"color":"#c7a2c1","bgcolor":"#b38ead"},{"id":724,"type":"PixelPerfectResolution","pos":[500,1660],"size":{"0":340,"1":100},"flags":{},"order":44,"mode":0,"inputs":[{"name":"original_image","type":"IMAGE","link":1373,"label":"original_image"},{"name":"image_gen_width","type":"INT","link":1339,"widget":{"name":"image_gen_width"},"label":"image_gen_width"},{"name":"image_gen_height","type":"INT","link":1340,"widget":{"name":"image_gen_height"},"label":"image_gen_height"}],"outputs":[{"name":"RESOLUTION (INT)","type":"INT","links":[1343],"shape":3,"label":"RESOLUTION (INT)","slot_index":0}],"properties":{"Node name for S&R":"PixelPerfectResolution"},"widgets_values":[512,512,"Just Resize"]},{"id":789,"type":"LCMScheduler","pos":[1861.4893418579097,1621.3463851577753],"size":{"0":315,"1":82},"flags":{},"order":52,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":1554,"label":"model"}],"outputs":[{"name":"SIGMAS","type":"SIGMAS","links":[1459],"shape":3,"label":"SIGMAS","slot_index":0}],"properties":{"Node name for S&R":"LCMScheduler"},"widgets_values":[10,0.55]},{"id":607,"type":"ImpactMakeImageBatch","pos":[1000,-880],"size":{"0":300,"1":240},"flags":{},"order":26,"mode":0,"inputs":[{"name":"image1","type":"IMAGE","link":1197,"label":"image1"},{"name":"image2","type":"IMAGE","link":1142,"label":"image2"},{"name":"image3","type":"IMAGE","link":1211,"label":"image3"},{"name":"image4","type":"IMAGE","link":1212,"label":"image4"},{"name":"image5","type":"IMAGE","link":1435,"label":"image5"},{"name":"image6","type":"IMAGE","link":1436,"label":"image6"},{"name":"image7","type":"IMAGE","link":null,"label":"image7"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1131],"shape":3,"label":"IMAGE","slot_index":0}],"properties":{"Node name for S&R":"ImpactMakeImageBatch"},"color":"#655281","bgcolor":"#513e6d"},{"id":530,"type":"Reroute","pos":[320,480],"size":[82,26],"flags":{},"order":37,"mode":0,"inputs":[{"name":"","type":"*","link":1471,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1166,1372,1373],"slot_index":0,"label":"IMAGE"}],"properties":{"showOutputText":true,"horizontal":false},"color":"#94b5d4","bgcolor":"#80a1c0"},{"id":791,"type":"Reroute","pos":[3020,-680],"size":[82,26],"flags":{},"order":61,"mode":0,"inputs":[{"name":"","type":"*","link":1478,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1479],"slot_index":0,"label":"IMAGE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":518,"type":"Note","pos":[-476.5321645279184,936.4136102973662],"size":{"0":400,"1":660},"flags":{},"order":3,"mode":0,"properties":{"text":""},"widgets_values":["设置  |  Settings\n\n当类型设置为“linear”时，可以使用_value字段调整每个的值。\n当类型设置为“dynamic”时，每个设置下方的文本框都用于各个值-遵循为每个帧设置值所提供的格式。\n\nWhen the type is set to \"linear\", the _value field can be used to adjust each value.\nWhen the type is set to \"dynamic\", the text box below each setting is used for each value - following the format provided for setting values for each frame.\n\n🙂\nFrame_distrbution_(value) 设置帧位置➡️\n\n设置帧分布会使帧按线性值隔开-例如，如果设置为24，则帧将位于0、24、48等位置。\n如果将类型设置为动态，则需要在下面的文本框中输入值。\n\nSetting the frame distribution will result in frames being separated by linear values - for example, if set to 16, the frames will be located at positions 0, 24, 48, and so on.\nIf the type is set to \"dynamic\" type, you need to enter a value in the text box below.\n\n🙂\nFrame_influence_(value) 设置帧影响的持续时间➡️\n\n较小的值（例如 0.50-0.80 左右）使每个图像之间的重叠更短，变化是突然的。\n高于 1 的值将在输入图像之间添加多的重叠，从而更早的混合，并且明显减少鬼影。\n\nSmaller values (such as around 0.50-0.80) make the overlap between each image shorter, and the changes are sudden.\nA value higher than 1 will add more overlap between the input images, resulting in earlier mixing and significantly reducing ghosting.\n\n🙂\nStrength_distribution_(value) 设置影响强度的低点和高点➡️\n\n(0.0,0.6)数字是强度重合到的范围：第一个值是低点，最后一个值是高点。\n\n (0.0, 0.6) The number is the range of intensity overlap: the first value is the low point, and the last value is the high point."],"color":"#955eb9","bgcolor":"#814aa5"},{"id":522,"type":"Note","pos":[-480,1640],"size":{"0":400,"1":160},"flags":{},"order":4,"mode":0,"properties":{"text":""},"widgets_values":["🌅观察图表曲线  |  Observing chart curves\n\n调整设置时，你可以先禁止后续的流程进行，根据标示的曲线判断动画的过度情况。\n\nWhen adjusting settings, you can first disable subsequent processes and judge the animation's transition based on the indicated curves."],"color":"#955eb9","bgcolor":"#814aa5"},{"id":436,"type":"PreviewImage","pos":[-20,1700],"size":{"0":400,"1":420},"flags":{},"order":40,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1202,"label":"images"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":773,"type":"LoadImage","pos":[-620,-400],"size":{"0":300,"1":420},"flags":{},"order":5,"mode":4,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1435],"shape":3,"label":"IMAGE","slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"title":"Load Image 05","properties":{"Node name for S&R":"LoadImage"},"widgets_values":["ComfyUI_00664_ (1).png","image"],"color":"#9b6bcb","bgcolor":"#8757b7"},{"id":774,"type":"LoadImage","pos":[-300,-400],"size":{"0":300,"1":420},"flags":{},"order":6,"mode":4,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1436],"shape":3,"label":"IMAGE","slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"title":"Load Image 06","properties":{"Node name for S&R":"LoadImage"},"widgets_values":["ComfyUI_00676_.png","image"],"color":"#9b6bcb","bgcolor":"#8757b7"},{"id":666,"type":"BNK_CLIPTextEncodeAdvanced","pos":[-920,680],"size":{"0":360,"1":200},"flags":{"collapsed":false},"order":32,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":1278,"label":"clip"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[1258],"shape":3,"label":"CONDITIONING","slot_index":0}],"properties":{"Node name for S&R":"BNK_CLIPTextEncodeAdvanced"},"widgets_values":["Quality, 8K, HDR, Rich Detail, ","none","A1111"],"color":"#4b9649","bgcolor":"#378235"},{"id":656,"type":"BNK_CLIPTextEncodeAdvanced","pos":[-920,960],"size":{"0":360,"1":180},"flags":{},"order":33,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":1279,"label":"clip"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[1259],"shape":3,"label":"CONDITIONING","slot_index":0}],"properties":{"Node name for S&R":"BNK_CLIPTextEncodeAdvanced"},"widgets_values":["(worst quality, low quality: 1.4), (normal quality: 1.2),(deformed, distorted, disfigured:1.3), poorly drawn, bad anatomy, wrong anatomy, extra limb, missing limb, floating limbs, (mutated hands and fingers:1.4), disconnected limbs, mutation, mutated, ugly, disgusting, blurry, amputation","none","A1111"],"color":"#b94f4f","bgcolor":"#a53b3b"},{"id":771,"type":"Reroute","pos":[-140,480],"size":[82,26],"flags":{},"order":35,"mode":0,"inputs":[{"name":"","type":"*","link":1431,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1470,1471],"slot_index":0,"label":"IMAGE"}],"properties":{"showOutputText":true,"horizontal":false},"color":"#94b5d4","bgcolor":"#80a1c0"},{"id":618,"type":"Image scale to side","pos":[1000,-480],"size":{"0":300,"1":140},"flags":{},"order":30,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1131,"label":"image"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1431],"shape":3,"label":"IMAGE","slot_index":0}],"properties":{"Node name for S&R":"Image scale to side"},"widgets_values":[768,"Longest","nearest-exact","disabled"],"color":"#1485ff","bgcolor":"#0071eb"},{"id":712,"type":"CR Apply LoRA Stack","pos":[-1400,840],"size":{"0":380,"1":80},"flags":{},"order":24,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":1318,"label":"model"},{"name":"clip","type":"CLIP","link":1319,"label":"clip"},{"name":"lora_stack","type":"LORA_STACK","link":1316,"label":"lora_stack"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[1399],"shape":3,"label":"MODEL","slot_index":0},{"name":"CLIP","type":"CLIP","links":[1320],"shape":3,"label":"CLIP","slot_index":1},{"name":"show_help","type":"STRING","links":null,"shape":3,"label":"show_help"}],"properties":{"Node name for S&R":"CR Apply LoRA Stack"}},{"id":695,"type":"Reroute","pos":[-200,540],"size":[82,26],"flags":{},"order":36,"mode":0,"inputs":[{"name":"","type":"*","link":1294,"label":""}],"outputs":[{"name":"MODEL","type":"MODEL","links":[1495],"slot_index":0,"label":"MODEL"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":796,"type":"IPAdapterModelLoader","pos":[-20,1460],"size":{"0":400,"1":60},"flags":{},"order":7,"mode":0,"outputs":[{"name":"IPADAPTER","type":"IPADAPTER","links":[1496],"shape":3,"label":"IPADAPTER","slot_index":0}],"properties":{"Node name for S&R":"IPAdapterModelLoader"},"widgets_values":["ip-adapter-plus_sd15.safetensors"]},{"id":797,"type":"CLIPVisionLoader","pos":[-20,1580],"size":{"0":400,"1":60},"flags":{},"order":8,"mode":0,"outputs":[{"name":"CLIP_VISION","type":"CLIP_VISION","links":[1497],"shape":3,"label":"CLIP_VISION"}],"properties":{"Node name for S&R":"CLIPVisionLoader"},"widgets_values":["CLIP-ViT-H-14-laion2B-s32B-b79K.safetensors"]},{"id":784,"type":"VAEDecode","pos":[1480,1320],"size":{"0":210,"1":46},"flags":{},"order":59,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":1530,"label":"samples"},{"name":"vae","type":"VAE","link":1474,"label":"vae"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1478],"shape":3,"label":"IMAGE","slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":760,"type":"Reroute","pos":[860,540],"size":[82,26],"flags":{},"order":45,"mode":0,"inputs":[{"name":"","type":"*","link":1411,"label":""}],"outputs":[{"name":"MODEL","type":"MODEL","links":[1522],"slot_index":0,"label":"MODEL"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":739,"type":"Reroute","pos":[1560,440],"size":[140.8,26],"flags":{},"order":56,"mode":0,"inputs":[{"name":"","type":"*","link":1378,"label":""}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[1463],"slot_index":0,"label":"CONDITIONING"}],"properties":{"showOutputText":true,"horizontal":false},"color":"#5faa5d","bgcolor":"#4b9649"},{"id":738,"type":"Reroute","pos":[1520,480],"size":[140.8,26],"flags":{},"order":57,"mode":0,"inputs":[{"name":"","type":"*","link":1377,"label":""}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[1464],"slot_index":0,"label":"CONDITIONING"}],"properties":{"showOutputText":true,"horizontal":false},"color":"#cd6363","bgcolor":"#b94f4f"},{"id":719,"type":"ADE_EmptyLatentImageLarge","pos":[1380,1840],"size":{"0":320,"1":80},"flags":{},"order":46,"mode":0,"inputs":[{"name":"width","type":"INT","link":1335,"widget":{"name":"width"},"label":"width"},{"name":"height","type":"INT","link":1336,"widget":{"name":"height"},"label":"height"},{"name":"batch_size","type":"INT","link":1334,"widget":{"name":"batch_size"},"label":"batch_size"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[1450],"shape":3,"label":"LATENT","slot_index":0}],"properties":{"Node name for S&R":"ADE_EmptyLatentImageLarge"},"widgets_values":[512,512,1]},{"id":626,"type":"CR Seed","pos":[1378.4694336120604,681.3465742492675],"size":{"0":320,"1":102},"flags":{},"order":9,"mode":0,"outputs":[{"name":"seed","type":"INT","links":[1451,1476],"shape":3,"label":"seed","slot_index":0},{"name":"show_help","type":"STRING","links":null,"shape":3,"label":"show_help"}],"properties":{"Node name for S&R":"CR Seed"},"widgets_values":[850770617138113,"fixed"],"color":"#5a8ef6","bgcolor":"#467ae2"},{"id":779,"type":"SamplerLCMCycle","pos":[1380,1440],"size":{"0":315,"1":130},"flags":{},"order":10,"mode":0,"outputs":[{"name":"SAMPLER","type":"SAMPLER","links":[1441],"shape":3,"label":"SAMPLER","slot_index":0}],"properties":{"Node name for S&R":"SamplerLCMCycle"},"widgets_values":[2,2,false,0]},{"id":783,"type":"LCMScheduler","pos":[1380,1620],"size":{"0":315,"1":82},"flags":{},"order":51,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":1531,"label":"model"}],"outputs":[{"name":"SIGMAS","type":"SIGMAS","links":[1444],"shape":3,"label":"SIGMAS","slot_index":0}],"properties":{"Node name for S&R":"LCMScheduler"},"widgets_values":[10,1]},{"id":780,"type":"SamplerCustom","pos":[1360,840],"size":{"0":340,"1":420},"flags":{},"order":55,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":1523,"label":"model"},{"name":"positive","type":"CONDITIONING","link":1545,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":1546,"label":"negative"},{"name":"sampler","type":"SAMPLER","link":1441,"label":"sampler"},{"name":"sigmas","type":"SIGMAS","link":1444,"label":"sigmas","slot_index":4},{"name":"latent_image","type":"LATENT","link":1450,"label":"latent_image"},{"name":"noise_seed","type":"INT","link":1451,"widget":{"name":"noise_seed"},"label":"noise_seed"}],"outputs":[{"name":"output","type":"LATENT","links":[1456,1530],"shape":3,"label":"output","slot_index":0},{"name":"denoised_output","type":"LATENT","links":null,"shape":3,"label":"denoised_output"}],"properties":{"Node name for S&R":"SamplerCustom"},"widgets_values":[true,172780093345902,"randomize",1]},{"id":736,"type":"Reroute","pos":[900,440],"size":[140.8,26],"flags":{},"order":53,"mode":0,"inputs":[{"name":"","type":"*","link":1375,"label":""}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[1378],"slot_index":0,"label":"CONDITIONING"}],"properties":{"showOutputText":true,"horizontal":false},"color":"#5faa5d","bgcolor":"#4b9649"},{"id":737,"type":"Reroute","pos":[940,480],"size":[140.8,26],"flags":{},"order":54,"mode":0,"inputs":[{"name":"","type":"*","link":1376,"label":""}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[1377],"slot_index":0,"label":"CONDITIONING"}],"properties":{"showOutputText":true,"horizontal":false},"color":"#cd6363","bgcolor":"#b94f4f"},{"id":716,"type":"Note","pos":[-480,680],"size":{"0":400,"1":200},"flags":{},"order":11,"mode":0,"properties":{"text":""},"widgets_values":["⌚️线性帧分布值  |  linear_frame_distribution_value \n\n视频总帧数= distribution_value * （图像数量 -1） + buffer * 2 + 1  /图像数量-1是因为序列帧的计算从0开始，所以4张图就是0.1.2.3，所以*3\n\nbatch size = distribution_value * （Number of images -1 ）+ buffer * 2 + 1  / （Number of images -1 ）Because the sequence frame calculation starts from 0, the encoding of the four images is 0, 1, 2, 3, so * 3\n"],"color":"#ce93f5","bgcolor":"#ba7fe1"},{"id":831,"type":"Display Int (rgthree)","pos":[1380,1940],"size":{"0":220,"1":76},"flags":{},"order":47,"mode":0,"inputs":[{"name":"input","type":"INT","link":1552,"widget":{"name":"input"},"dir":3,"label":"input"}],"properties":{"Node name for S&R":"Display Int (rgthree)"},"widgets_values":[0,"81"]},{"id":720,"type":"Reroute","pos":[660,1960],"size":[75,26],"flags":{},"order":43,"mode":0,"inputs":[{"name":"","type":"*","link":1493,"label":"","widget":{"name":"value"}}],"outputs":[{"name":"INT","type":"INT","links":[1334,1552],"slot_index":0,"label":"INT"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":468,"type":"ACN_AdvancedControlNetApply","pos":[500,720],"size":{"0":340,"1":280},"flags":{},"order":50,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":1491,"slot_index":0,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":1492,"slot_index":1,"label":"negative"},{"name":"control_net","type":"CONTROL_NET","link":879,"label":"control_net"},{"name":"image","type":"IMAGE","link":1430,"label":"image"},{"name":"mask_optional","type":"MASK","link":null,"label":"mask_optional","slot_index":4},{"name":"timestep_kf","type":"TIMESTEP_KEYFRAME","link":null,"label":"timestep_kf"},{"name":"latent_kf_override","type":"LATENT_KEYFRAME","link":null,"label":"latent_kf_override"},{"name":"weights_override","type":"CONTROL_NET_WEIGHTS","link":null,"label":"weights_override"},{"name":"model_optional","type":"MODEL","link":null,"label":"model_optional","slot_index":8}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[1375,1545],"shape":3,"slot_index":0,"label":"positive"},{"name":"negative","type":"CONDITIONING","links":[1376,1546],"shape":3,"slot_index":1,"label":"negative"},{"name":"model_opt","type":"MODEL","links":null,"shape":3,"label":"model_opt"}],"properties":{"Node name for S&R":"ACN_AdvancedControlNetApply"},"widgets_values":[0.85,0,0.25]},{"id":633,"type":"FakeScribblePreprocessor","pos":[500,1280],"size":{"0":340,"1":80},"flags":{},"order":48,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1166,"label":"image"},{"name":"resolution","type":"INT","link":1343,"widget":{"name":"resolution"},"label":"resolution"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1430],"shape":3,"label":"IMAGE","slot_index":0}],"properties":{"Node name for S&R":"FakeScribblePreprocessor"},"widgets_values":["enable",1024]},{"id":745,"type":"ADE_AnimateDiffSamplingSettings","pos":[920,720],"size":{"0":340,"1":240},"flags":{},"order":12,"mode":0,"inputs":[{"name":"noise_layers","type":"NOISE_LAYERS","link":null,"label":"noise_layers"},{"name":"iteration_opts","type":"ITERATION_OPTS","link":null,"label":"iteration_opts"},{"name":"custom_cfg","type":"CUSTOM_CFG","link":null,"label":"custom_cfg"},{"name":"sigma_schedule","type":"SIGMA_SCHEDULE","link":null,"label":"sigma_schedule"},{"name":"seed_override","type":"INT","link":null,"widget":{"name":"seed_override"},"label":"seed_override"}],"outputs":[{"name":"settings","type":"SAMPLE_SETTINGS","links":[1391],"shape":3,"label":"settings"}],"properties":{"Node name for S&R":"ADE_AnimateDiffSamplingSettings"},"widgets_values":[0,"FreeNoise","comfy",0,0,false]},{"id":342,"type":"ADE_AnimateDiffUniformContextOptions","pos":[920,1340],"size":{"0":340,"1":280},"flags":{},"order":13,"mode":0,"inputs":[{"name":"prev_context","type":"CONTEXT_OPTIONS","link":null,"label":"prev_context","slot_index":0},{"name":"view_opts","type":"VIEW_OPTS","link":null,"label":"view_opts"}],"outputs":[{"name":"CONTEXT_OPTIONS","type":"CONTEXT_OPTIONS","links":[1346],"shape":3,"slot_index":0,"label":"CONTEXT_OPTIONS"}],"properties":{"Node name for S&R":"ADE_AnimateDiffUniformContextOptions"},"widgets_values":[16,1,4,"uniform",true,"flat",false,0,1]},{"id":672,"type":"Note","pos":[-1400,1700],"size":{"0":380,"1":340},"flags":{},"order":14,"mode":0,"properties":{"text":""},"widgets_values":["⬆️⬆️⬆️⬆️⬆️\n\n\n\nAnimateLCM_lora :\nhttps://huggingface.co/wangfuyun/AnimateLCM/tree/main\n\n-\n⭐Using LCM ckpt, LCM lora strength: ≤ 0.35 is a good value ( too high will cause noise )\n⭐Using NON LCM ckpt, LCM lora strength: 1 \n-\n⭐使用LCM的ckpt，LCM lora 强度：≤0.35 是个不错的值 ( 太高了会有噪点 )\n⭐使用非LCM的ckpt，LCM lora 强度：1"],"color":"#b86fb2","bgcolor":"#a45b9e"},{"id":467,"type":"ACN_SparseCtrlLoaderAdvanced","pos":[500,1060],"size":{"0":340,"1":160},"flags":{},"order":42,"mode":0,"inputs":[{"name":"sparse_method","type":"SPARSE_METHOD","link":1203,"slot_index":0,"label":"sparse_method"},{"name":"tk_optional","type":"TIMESTEP_KEYFRAME","link":null,"label":"tk_optional","slot_index":1}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[879],"shape":3,"slot_index":0,"label":"CONTROL_NET"}],"properties":{"Node name for S&R":"ACN_SparseCtrlLoaderAdvanced"},"widgets_values":["v3_sd15_sparsectrl_scribble.ckpt",true,1,1]},{"id":727,"type":"Note","pos":[920,1920],"size":{"0":340,"1":180},"flags":{},"order":15,"mode":0,"properties":{"text":""},"widgets_values":["⭐If you need to enable camera movement controls\n\nmotion_lora:\nhttps://huggingface.co/guoyww/animatediff/tree/main\n\nhttps://huggingface.co/peteromallet/poms-funtime-mlora-emporium\n\n⭐（save them to the : \\custom_nodes\\ComfyUI-AnimateDiff-Evolved/motion_lora\\ folder）"],"color":"#3ba4c4","bgcolor":"#2790b0"},{"id":832,"type":"Note","pos":[500,1440],"size":{"0":340,"1":140},"flags":{},"order":16,"mode":0,"properties":{"text":""},"widgets_values":["SparseCtrl： \nhttps://huggingface.co/guoyww/animatediff/blob/main/v3_sd15_sparsectrl_scribble.ckpt\n\n⭐file location ：\\ComfyUI\\models\\controlnet"],"color":"#3ba4c4","bgcolor":"#2790b0"},{"id":793,"type":"Fast Groups Bypasser (rgthree)","pos":{"0":-480,"1":1840,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":400,"1":280},"flags":{},"order":17,"mode":0,"inputs":[],"outputs":[{"name":"OPT_CONNECTION","type":"*","links":null,"label":"OPT_CONNECTION"}],"properties":{"matchColors":"","matchTitle":"","showNav":true,"sort":"position","customSortAlphabet":"","toggleRestriction":"default"},"color":"#4b9649","bgcolor":"#378235"},{"id":726,"type":"ADE_AnimateDiffLoaderWithContext","pos":[920,1020],"size":{"0":340,"1":240},"flags":{},"order":49,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":1522,"label":"model"},{"name":"context_options","type":"CONTEXT_OPTIONS","link":1346,"label":"context_options"},{"name":"motion_lora","type":"MOTION_LORA","link":1347,"label":"motion_lora"},{"name":"ad_settings","type":"AD_SETTINGS","link":null,"label":"ad_settings","slot_index":3},{"name":"sample_settings","type":"SAMPLE_SETTINGS","link":1391,"label":"sample_settings","slot_index":4},{"name":"ad_keyframes","type":"AD_KEYFRAMES","link":null,"label":"ad_keyframes","slot_index":5}],"outputs":[{"name":"MODEL","type":"MODEL","links":[1523,1531,1553,1554],"shape":3,"label":"MODEL","slot_index":0}],"properties":{"Node name for S&R":"ADE_AnimateDiffLoaderWithContext"},"widgets_values":["AnimateLCM_sd15_t2v.ckpt","lcm[100_ots]",1.5,true]},{"id":649,"type":"BatchCreativeInterpolation","pos":[-20,680],"size":{"0":400,"1":720},"flags":{},"order":38,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":1258,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":1259,"label":"negative"},{"name":"images","type":"IMAGE","link":1470,"label":"images"},{"name":"model","type":"MODEL","link":1495,"label":"model"},{"name":"ipadapter","type":"IPADAPTER","link":1496,"label":"ipadapter","slot_index":4},{"name":"clip_vision","type":"CLIP_VISION","link":1497,"label":"clip_vision","slot_index":5},{"name":"base_ipa_advanced_settings","type":"ADVANCED_IPA_SETTINGS","link":null,"label":"base_ipa_advanced_settings","slot_index":6},{"name":"detail_ipa_advanced_settings","type":"ADVANCED_IPA_SETTINGS","link":null,"label":"detail_ipa_advanced_settings","slot_index":7}],"outputs":[{"name":"GRAPH","type":"IMAGE","links":[1202],"shape":3,"label":"GRAPH","slot_index":0},{"name":"POSITIVE","type":"CONDITIONING","links":[1491],"shape":3,"label":"POSITIVE","slot_index":1},{"name":"NEGATIVE","type":"CONDITIONING","links":[1492],"shape":3,"label":"NEGATIVE","slot_index":2},{"name":"MODEL","type":"MODEL","links":[1490],"shape":3,"label":"MODEL","slot_index":3},{"name":"KEYFRAME_POSITIONS","type":"SPARSE_METHOD","links":[1203],"shape":3,"label":"KEYFRAME_POSITIONS","slot_index":4},{"name":"BATCH_SIZE","type":"INT","links":[1493],"shape":3,"label":"BATCH_SIZE","slot_index":5},{"name":"BUFFER","type":"INT","links":null,"shape":3,"label":"BUFFER"}],"properties":{"Node name for S&R":"BatchCreativeInterpolation"},"widgets_values":["linear",24,"0,10,26,40","linear","(0.9,1.3)","(1.0,1.0),(1.0,1.5)(1.0,0.5)","linear","(0.0,1.0)","(0.0,1.0),(0.0,1.0),(0.0,1.0),(0.0,1.0)",4,false]},{"id":590,"type":"LoadImage","pos":[-940,-880],"size":{"0":300,"1":420},"flags":{},"order":18,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1197],"shape":3,"label":"IMAGE","slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"title":"Load Image 01","properties":{"Node name for S&R":"LoadImage"},"widgets_values":["ComfyUI_00784_.png","image"],"color":"#9b6bcb","bgcolor":"#8757b7"},{"id":608,"type":"LoadImage","pos":[-620,-880],"size":{"0":300,"1":420},"flags":{},"order":19,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1142],"shape":3,"label":"IMAGE","slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"title":"Load Image 02","properties":{"Node name for S&R":"LoadImage"},"widgets_values":["ComfyUI_00786_.png","image"],"color":"#9b6bcb","bgcolor":"#8757b7"},{"id":651,"type":"LoadImage","pos":[-300,-880],"size":{"0":300,"1":420},"flags":{},"order":20,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1211],"shape":3,"label":"IMAGE","slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"title":"Load Image 03","properties":{"Node name for S&R":"LoadImage"},"widgets_values":["ComfyUI_00787_.png","image"],"color":"#9b6bcb","bgcolor":"#8757b7"},{"id":663,"type":"CheckpointLoaderSimple","pos":[-1400,680],"size":{"0":380,"1":100},"flags":{},"order":21,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[1318],"shape":3,"label":"MODEL","slot_index":0},{"name":"CLIP","type":"CLIP","links":[1319],"shape":3,"label":"CLIP","slot_index":1},{"name":"VAE","type":"VAE","links":[1439],"shape":3,"label":"VAE","slot_index":2}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["SD15\\dreamshaper_8.safetensors"],"color":"#ccba46","bgcolor":"#b8a632"},{"id":652,"type":"LoadImage","pos":[-940,-400],"size":{"0":300,"1":420},"flags":{},"order":22,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1212],"shape":3,"label":"IMAGE","slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"title":"Load Image 04","properties":{"Node name for S&R":"LoadImage"},"widgets_values":["ComfyUI_00785_.png","image"],"color":"#9b6bcb","bgcolor":"#8757b7"},{"id":725,"type":"ADE_AnimateDiffLoRALoader","pos":[920,1680],"size":{"0":340,"1":82},"flags":{},"order":23,"mode":0,"inputs":[{"name":"prev_motion_lora","type":"MOTION_LORA","link":null,"label":"prev_motion_lora"}],"outputs":[{"name":"MOTION_LORA","type":"MOTION_LORA","links":[1347],"shape":3,"label":"MOTION_LORA"}],"properties":{"Node name for S&R":"ADE_AnimateDiffLoRALoader"},"widgets_values":["v2_lora_ZoomOut.ckpt",0.8],"color":"#3ba4c4","bgcolor":"#2790b0"},{"id":772,"type":"VHS_VideoCombine","pos":[20,-880],"size":[460,1080],"flags":{},"order":63,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1479,"label":"images","slot_index":0},{"name":"audio","type":"VHS_AUDIO","link":null,"label":"audio"},{"name":"batch_manager","type":"VHS_BatchManager","link":null,"label":"batch_manager"}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":null,"shape":3,"label":"Filenames"}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":12,"loop_count":0,"filename_prefix":"MI2V/%date:yyyy-MM-dd%/AD_preview","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":false,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"preview_00046.mp4","subfolder":"MI2V\\2024-04-18","type":"output","format":"video/h264-mp4"}}},"color":"#9b6bcb","bgcolor":"#8757b7"},{"id":281,"type":"VHS_VideoCombine","pos":[500,-880],"size":[460,1080],"flags":{},"order":66,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1433,"label":"images","slot_index":0},{"name":"audio","type":"VHS_AUDIO","link":null,"label":"audio"},{"name":"batch_manager","type":"VHS_BatchManager","link":null,"label":"batch_manager"}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":null,"shape":3,"label":"Filenames"}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":30,"loop_count":0,"filename_prefix":"MI2V/%date:yyyy-MM-dd%/AD_output","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":false,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"output_00027.mp4","subfolder":"MI2V\\2024-04-18","type":"output","format":"video/h264-mp4"}}},"color":"#9b6bcb","bgcolor":"#8757b7"}],"links":[[879,467,0,468,2,"CONTROL_NET"],[1131,607,0,618,0,"IMAGE"],[1142,608,0,607,1,"IMAGE"],[1166,530,0,633,0,"IMAGE"],[1197,590,0,607,0,"IMAGE"],[1202,649,0,436,0,"IMAGE"],[1203,649,4,467,0,"SPARSE_METHOD"],[1211,651,0,607,2,"IMAGE"],[1212,652,0,607,3,"IMAGE"],[1258,666,0,649,0,"CONDITIONING"],[1259,656,0,649,1,"CONDITIONING"],[1278,673,0,666,0,"CLIP"],[1279,673,0,656,0,"CLIP"],[1294,694,0,695,0,"*"],[1316,714,0,712,2,"LORA_STACK"],[1318,663,0,712,0,"MODEL"],[1319,663,1,712,1,"CLIP"],[1320,712,1,673,0,"CLIP"],[1334,720,0,719,2,"INT"],[1335,718,0,719,0,"INT"],[1336,718,1,719,1,"INT"],[1339,718,0,724,1,"INT"],[1340,718,1,724,2,"INT"],[1343,724,0,633,1,"INT"],[1346,342,0,726,1,"CONTEXT_OPTIONS"],[1347,725,0,726,2,"MOTION_LORA"],[1353,622,0,729,0,"*"],[1372,530,0,718,0,"IMAGE"],[1373,530,0,724,0,"IMAGE"],[1375,468,0,736,0,"*"],[1376,468,1,737,0,"*"],[1377,737,0,738,0,"*"],[1378,736,0,739,0,"*"],[1391,745,0,726,4,"SAMPLE_SETTINGS"],[1399,712,0,734,0,"MODEL"],[1400,734,0,694,0,"*"],[1411,759,0,760,0,"*"],[1430,633,0,468,3,"IMAGE"],[1431,618,0,771,0,"*"],[1433,729,0,281,0,"IMAGE"],[1435,773,0,607,4,"IMAGE"],[1436,774,0,607,5,"IMAGE"],[1439,663,2,601,0,"*"],[1441,779,0,780,3,"SAMPLER"],[1444,783,0,780,4,"SIGMAS"],[1450,719,0,780,5,"LATENT"],[1451,626,0,780,6,"INT"],[1456,780,0,655,0,"LATENT"],[1458,787,0,788,3,"SAMPLER"],[1459,789,0,788,4,"SIGMAS"],[1460,788,0,790,0,"LATENT"],[1461,790,0,622,0,"IMAGE"],[1462,655,0,788,5,"LATENT"],[1463,739,0,788,1,"CONDITIONING"],[1464,738,0,788,2,"CONDITIONING"],[1470,771,0,649,2,"IMAGE"],[1471,771,0,530,0,"*"],[1472,601,0,747,0,"*"],[1473,747,0,540,0,"*"],[1474,747,0,784,1,"VAE"],[1475,540,0,790,1,"VAE"],[1476,626,0,788,6,"INT"],[1478,784,0,791,0,"*"],[1479,791,0,772,0,"IMAGE"],[1490,649,3,759,0,"*"],[1491,649,1,468,0,"CONDITIONING"],[1492,649,2,468,1,"CONDITIONING"],[1493,649,5,720,0,"*"],[1495,695,0,649,3,"MODEL"],[1496,796,0,649,4,"IPADAPTER"],[1497,797,0,649,5,"CLIP_VISION"],[1522,760,0,726,0,"MODEL"],[1523,726,0,780,0,"MODEL"],[1530,780,0,784,0,"LATENT"],[1531,726,0,783,0,"MODEL"],[1545,468,0,780,1,"CONDITIONING"],[1546,468,1,780,2,"CONDITIONING"],[1552,720,0,831,0,"INT"],[1553,726,0,788,0,"MODEL"],[1554,726,0,789,0,"MODEL"]],"groups":[{"title":"AnimateDiff","bounding":[885,585,403,1550],"color":"#01bbf1","font_size":24,"locked":false},{"title":"Preview Sampler","bounding":[1302,585,456,1548],"color":"#5a8ef6","font_size":24,"locked":false},{"title":"Steerable Motion","bounding":[-506,581,950,1557],"color":"#955eb9","font_size":24,"locked":false},{"title":"Load Checkpoint & Lora","bounding":[-1435,581,463,1555],"color":"#b86fb2","font_size":24,"locked":false},{"title":"ControlNet","bounding":[460,583,407,1553],"color":"#e34545","font_size":24,"locked":false},{"title":"Prompt","bounding":[-951,581,429,1555],"color":"#4b9649","font_size":24,"locked":false},{"title":"Output Video","bounding":[1781,589,446,1209],"color":"#de773f","font_size":24,"locked":false},{"title":"MULTIPLE IMAGE TO VIDEO","bounding":[-983,-1093,2321,99],"color":"#9b6bcb","font_size":72,"locked":false},{"title":"Load image","bounding":[-983,-976,2321,1035],"color":"#9869c7","font_size":24,"locked":false},{"title":"VFI","bounding":[1780,1824,446,312],"color":"#d1d1d1","font_size":24,"locked":false}],"config":{},"extra":{},"version":0.4}